# å˜æ›´æ—¥å¿— (CHANGELOG)

æœ¬æ–‡æ¡£è®°å½•äº† Kube Node Manager çš„æ‰€æœ‰ç‰ˆæœ¬å˜æ›´å†å²ã€‚

æ ¼å¼éµå¾ª [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)ï¼Œ
ç‰ˆæœ¬å·éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/)ã€‚

---

## [v2.16.2] - 2025-10-29

### ğŸ› Bug ä¿®å¤

#### æ‰¹é‡æ“ä½œç¼“å­˜åˆ·æ–°é—®é¢˜

**é—®é¢˜æè¿°**ï¼š
- æ‰¹é‡ç¦æ­¢è°ƒåº¦ï¼ˆCordonï¼‰ã€æ‰¹é‡è§£é™¤è°ƒåº¦ï¼ˆUncordonï¼‰ã€æ‰¹é‡æ ‡ç­¾æ›´æ–°ã€æ‰¹é‡æ±¡ç‚¹æ›´æ–°æ“ä½œå®Œæˆåï¼Œå‰ç«¯æ²¡æœ‰ç«‹å³è·å–åˆ°æœ€æ–°çš„èŠ‚ç‚¹çŠ¶æ€
- ç”±äºåç«¯ç¼“å­˜æœªåŠæ—¶æ¸…é™¤ï¼Œå‰ç«¯åˆ·æ–°æ—¶å¯èƒ½è·å–åˆ°è¿‡æ—¶çš„ç¼“å­˜æ•°æ®
- ç”¨æˆ·éœ€è¦ç­‰å¾…ç¼“å­˜è¿‡æœŸï¼ˆ30ç§’ï¼‰æˆ–å¼ºåˆ¶åˆ·æ–°æ‰èƒ½çœ‹åˆ°æ­£ç¡®çš„èŠ‚ç‚¹çŠ¶æ€

**ä¿®å¤å†…å®¹**ï¼š

**èŠ‚ç‚¹è°ƒåº¦æ“ä½œ**ï¼š
1. âœ… **BatchCordon ç¼“å­˜æ¸…é™¤** - æ‰¹é‡ç¦æ­¢è°ƒåº¦æ“ä½œå®Œæˆåç«‹å³æ¸…é™¤é›†ç¾¤ç¼“å­˜
2. âœ… **BatchUncordon ç¼“å­˜æ¸…é™¤** - æ‰¹é‡è§£é™¤è°ƒåº¦æ“ä½œå®Œæˆåç«‹å³æ¸…é™¤é›†ç¾¤ç¼“å­˜
3. âœ… **BatchCordonWithProgress ç¼“å­˜æ¸…é™¤** - å¸¦è¿›åº¦çš„æ‰¹é‡ç¦æ­¢è°ƒåº¦å®Œæˆåæ¸…é™¤ç¼“å­˜
4. âœ… **BatchUncordonWithProgress ç¼“å­˜æ¸…é™¤** - å¸¦è¿›åº¦çš„æ‰¹é‡è§£é™¤è°ƒåº¦å®Œæˆåæ¸…é™¤ç¼“å­˜
5. âœ… **BatchDrain ç¼“å­˜æ¸…é™¤** - æ‰¹é‡é©±é€æ“ä½œå®Œæˆåæ¸…é™¤ç¼“å­˜
6. âœ… **BatchDrainWithProgress ç¼“å­˜æ¸…é™¤** - å¸¦è¿›åº¦çš„æ‰¹é‡é©±é€å®Œæˆåæ¸…é™¤ç¼“å­˜

**æ ‡ç­¾ç®¡ç†æ“ä½œ**ï¼š
7. âœ… **BatchUpdateLabels ç¼“å­˜æ¸…é™¤** - æ‰¹é‡æ›´æ–°æ ‡ç­¾æ“ä½œå®Œæˆåç«‹å³æ¸…é™¤é›†ç¾¤ç¼“å­˜
8. âœ… **BatchUpdateLabelsWithProgress ç¼“å­˜æ¸…é™¤** - å¸¦è¿›åº¦çš„æ‰¹é‡æ›´æ–°æ ‡ç­¾å®Œæˆåæ¸…é™¤ç¼“å­˜

**æ±¡ç‚¹ç®¡ç†æ“ä½œ**ï¼š
9. âœ… **BatchUpdateTaints ç¼“å­˜æ¸…é™¤** - æ‰¹é‡æ›´æ–°æ±¡ç‚¹æ“ä½œå®Œæˆåç«‹å³æ¸…é™¤é›†ç¾¤ç¼“å­˜
10. âœ… **BatchUpdateTaintsWithProgress ç¼“å­˜æ¸…é™¤** - å¸¦è¿›åº¦çš„æ‰¹é‡æ›´æ–°æ±¡ç‚¹å®Œæˆåæ¸…é™¤ç¼“å­˜
11. âœ… **BatchCopyTaints ç¼“å­˜æ¸…é™¤** - æ‰¹é‡å¤åˆ¶æ±¡ç‚¹æ“ä½œå®Œæˆåç«‹å³æ¸…é™¤é›†ç¾¤ç¼“å­˜
12. âœ… **BatchCopyTaintsWithProgress ç¼“å­˜æ¸…é™¤** - å¸¦è¿›åº¦çš„æ‰¹é‡å¤åˆ¶æ±¡ç‚¹å®Œæˆåæ¸…é™¤ç¼“å­˜

**åŸºç¡€è®¾æ–½**ï¼š
13. âœ… **æ–°å¢ InvalidateClusterCache æ–¹æ³•** - åœ¨ k8s service ä¸­æä¾›é›†ç¾¤ç¼“å­˜æ¸…é™¤æ¥å£

**ä¿®å¤ä»£ç **ï¼š
```go
// backend/internal/service/node/node.go
func (s *Service) BatchCordon(req BatchNodeRequest, userID uint) (map[string]interface{}, error) {
    // æ‰¹é‡æ“ä½œå®Œæˆåæ¸…é™¤ç¼“å­˜ï¼Œç¡®ä¿å‰ç«¯èƒ½è·å–åˆ°æœ€æ–°æ•°æ®
    defer func() {
        if len(successful) > 0 {
            s.k8sSvc.InvalidateClusterCache(req.ClusterName)
            s.logger.Infof("Invalidated cache for cluster %s after batch cordon operation", req.ClusterName)
        }
    }()
    
    // ... æ‰¹é‡æ“ä½œé€»è¾‘
}

// backend/internal/service/k8s/k8s.go
func (s *Service) InvalidateClusterCache(clusterName string) {
    s.cache.InvalidateCluster(clusterName)
}
```

**å‰ç«¯åˆ·æ–°ä¼˜åŒ–**ï¼š
14. âœ… **åŒé‡åˆ·æ–°æœºåˆ¶** - ç«‹å³åˆ·æ–° + å»¶è¿Ÿåˆ·æ–°ï¼ˆ800msï¼‰ï¼Œç¡®ä¿æ•°æ®ä¸€å®šä¼šæ›´æ–°
15. âœ… **é™çº§æ–¹æ¡ˆåŒé‡åˆ·æ–°** - é™çº§æ–¹æ¡ˆä¹Ÿé‡‡ç”¨åŒé‡åˆ·æ–°ï¼Œé˜²æ­¢å•æ¬¡åˆ·æ–°å¤±è´¥
16. âœ… **è¯¦ç»†æ—¥å¿—è¿½è¸ª** - æ·»åŠ  emoji æ ‡è®°çš„è¯¦ç»†æ—¥å¿—ï¼Œæ–¹ä¾¿è°ƒè¯•å’Œè¿½è¸ªåˆ·æ–°æµç¨‹
17. âœ… **ç¼©çŸ­é™çº§æ–¹æ¡ˆè¶…æ—¶æ—¶é—´** - ä» 30ç§’ç¼©çŸ­åˆ° 8ç§’ï¼Œæ”¹å–„ WebSocket æ–­å¼€æ—¶çš„ç”¨æˆ·ä½“éªŒ
18. âœ… **ä¼˜åŒ–é™çº§æ–¹æ¡ˆæç¤ºæ¶ˆæ¯** - ä»"å¯èƒ½å·²å®Œæˆ"æ”¹ä¸º"å·²å®Œæˆ"ï¼Œæä¾›æ›´æ˜ç¡®çš„åé¦ˆ

**ä¿®å¤ä»£ç ï¼ˆå‰ç«¯ï¼‰**ï¼š
```javascript
// frontend/src/views/nodes/NodeList.vue
const handleProgressCompleted = async (data) => {
  // ...
  // åŒé‡åˆ·æ–°æœºåˆ¶ï¼šç«‹å³åˆ·æ–° + å»¶è¿Ÿåˆ·æ–°
  console.log('ğŸ”„ [æ‰¹é‡æ“ä½œ] ç«‹å³åˆ·æ–°èŠ‚ç‚¹æ•°æ®')
  refreshData().then(() => {
    console.log('âœ… [æ‰¹é‡æ“ä½œ] ç¬¬ä¸€æ¬¡åˆ·æ–°å®Œæˆ')
  }).catch(err => {
    console.error('âŒ [æ‰¹é‡æ“ä½œ] ç¬¬ä¸€æ¬¡åˆ·æ–°å¤±è´¥:', err)
  })
  
  // å»¶è¿Ÿ800msåå†æ¬¡åˆ·æ–°ï¼Œç¡®ä¿åç«¯ç¼“å­˜æ¸…é™¤å®Œæˆ
  setTimeout(async () => {
    console.log('ğŸ”„ [æ‰¹é‡æ“ä½œ] å¼€å§‹äºŒæ¬¡åˆ·æ–°èŠ‚ç‚¹æ•°æ®')
    await refreshData()
    console.log('âœ… [æ‰¹é‡æ“ä½œ] äºŒæ¬¡åˆ·æ–°å®Œæˆï¼Œæ•°æ®å·²æ›´æ–°')
  }, 800)
}

const startProgressFallback = (operationType) => {
  // 8ç§’åå¼ºåˆ¶åˆ·æ–°ï¼ˆåŸ30ç§’ï¼‰ï¼Œä¹Ÿä½¿ç”¨åŒé‡åˆ·æ–°æœºåˆ¶
  progressFallbackTimer.value = setTimeout(async () => {
    console.log('âš ï¸ [é™çº§æ–¹æ¡ˆ] è§¦å‘ï¼š8ç§’è¶…æ—¶ï¼Œå¼ºåˆ¶åˆ·æ–°')
    await refreshData()
    // å†å»¶è¿Ÿ500msåˆ·æ–°ä¸€æ¬¡
    setTimeout(async () => {
      await refreshData()
    }, 500)
  }, 8000)
}
```

**ä¿®å¤æ•ˆæœ**ï¼š
- âœ… æ‰¹é‡æ“ä½œå®Œæˆåç«‹å³æ¸…é™¤ç¼“å­˜
- âœ… **åŒé‡åˆ·æ–°æœºåˆ¶ç¡®ä¿æ•°æ®ä¸€å®šä¼šæ›´æ–°**ï¼ˆç«‹å³åˆ·æ–° + å»¶è¿Ÿ 800ms å†åˆ·æ–°ï¼‰
- âœ… å‰ç«¯åˆ·æ–°æ—¶è·å–æœ€æ–°çš„èŠ‚ç‚¹çŠ¶æ€
- âœ… ç”¨æˆ·ä½“éªŒæ˜¾è‘—æå‡ï¼Œ**æ— éœ€æ‰‹åŠ¨åˆ·æ–°**
- âœ… é€‚ç”¨äºåŒæ­¥æ‰¹é‡æ“ä½œï¼ˆâ‰¤5ä¸ªèŠ‚ç‚¹ï¼‰
- âœ… é€‚ç”¨äºå¼‚æ­¥æ‰¹é‡æ“ä½œï¼ˆ>5ä¸ªèŠ‚ç‚¹ï¼‰
- âœ… WebSocket æ–­å¼€æ—¶ç”¨æˆ·ä»…éœ€ç­‰å¾… 8 ç§’å³å¯çœ‹åˆ°æ›´æ–°ï¼ˆåŸ 30 ç§’ï¼‰
- âœ… è¯¦ç»†çš„ emoji æ—¥å¿—æ–¹ä¾¿è¿½è¸ªå’Œè°ƒè¯•åˆ·æ–°æµç¨‹
- âœ… åŒé‡åˆ·æ–°é¿å…äº†å•æ¬¡åˆ·æ–°å› æ—¶åºé—®é¢˜å¯¼è‡´çš„æ•°æ®ä¸æ›´æ–°

**å½±å“èŒƒå›´**ï¼š
- åç«¯èŠ‚ç‚¹æœåŠ¡å±‚ï¼ˆnode serviceï¼‰
- åç«¯æ ‡ç­¾æœåŠ¡å±‚ï¼ˆlabel serviceï¼‰
- åç«¯æ±¡ç‚¹æœåŠ¡å±‚ï¼ˆtaint serviceï¼‰
- åç«¯ Kubernetes æœåŠ¡å±‚ï¼ˆk8s serviceï¼‰
- ç¼“å­˜ç®¡ç†å±‚ï¼ˆcacheï¼‰
- å‰ç«¯èŠ‚ç‚¹åˆ—è¡¨é¡µé¢ï¼ˆNodeList.vueï¼‰

---

## [v2.16.1] - 2025-10-28

### ğŸ› Bug ä¿®å¤

#### æ‰¹é‡è°ƒåº¦æ“ä½œç¼ºå°‘é™çº§æ–¹æ¡ˆ

**é—®é¢˜æè¿°**ï¼š
- æ‰¹é‡ç¦æ­¢è°ƒåº¦ï¼ˆCordonï¼‰ã€æ‰¹é‡è§£é™¤è°ƒåº¦ï¼ˆUncordonï¼‰ã€æ‰¹é‡é©±é€ï¼ˆDrainï¼‰ç¼ºå°‘ WebSocket æ–­å¼€é™çº§æ–¹æ¡ˆ
- å½“ WebSocket è¿æ¥åœ¨æ‰¹é‡æ“ä½œè¿‡ç¨‹ä¸­æ–­å¼€æ—¶ï¼Œå‰ç«¯æ— æ³•æ”¶åˆ°å®Œæˆæ¶ˆæ¯ï¼Œå¯¼è‡´ç•Œé¢ä¸åˆ·æ–°
- ç”¨æˆ·éœ€è¦æ‰‹åŠ¨å¤šæ¬¡åˆ·æ–°æ‰èƒ½çœ‹åˆ°æœ€æ–°çŠ¶æ€

**ä¿®å¤å†…å®¹**ï¼š

1. âœ… **æ‰¹é‡ç¦æ­¢è°ƒåº¦é™çº§æ–¹æ¡ˆ** - ä¸º `confirmBatchCordon` æ·»åŠ é™çº§å®šæ—¶å™¨
2. âœ… **æ‰¹é‡è§£é™¤è°ƒåº¦é™çº§æ–¹æ¡ˆ** - ä¸º `batchUncordon` æ·»åŠ é™çº§å®šæ—¶å™¨
3. âœ… **æ‰¹é‡é©±é€é™çº§æ–¹æ¡ˆ** - ä¸º `confirmBatchDrain` æ·»åŠ é™çº§å®šæ—¶å™¨

**ä¿®å¤ä»£ç **ï¼š
```javascript
// frontend/src/views/nodes/NodeList.vue
if (nodeNames.length > 5) {
  const progressResponse = await nodeApi.batchCordonWithProgress(...)
  currentTaskId.value = progressResponse.data.data.task_id
  progressDialogVisible.value = true
  
  // ğŸ”¥ æ–°å¢ï¼šå¯åŠ¨é™çº§æ–¹æ¡ˆ
  startProgressFallback('cordon')
}
```

**ä¿®å¤æ•ˆæœ**ï¼š
- âœ… æ‰€æœ‰æ‰¹é‡æ“ä½œéƒ½æœ‰é™çº§ä¿æŠ¤
- âœ… WebSocket æ–­å¼€æ—¶ 30 ç§’åè‡ªåŠ¨åˆ·æ–°
- âœ… ç¡®ä¿ç”¨æˆ·å§‹ç»ˆèƒ½çœ‹åˆ°æœ€æ–°çŠ¶æ€

---

## [v2.16.0] - 2025-10-28

### ğŸ› Bug ä¿®å¤

#### ç¼“å­˜å¤±æ•ˆå¯¼è‡´æ ‡ç­¾/æ±¡ç‚¹æ›´æ–°ä¸æ˜¾ç¤º ğŸ”¥ (Critical)

**é—®é¢˜æè¿°**ï¼š
- æ‰¹é‡åˆ é™¤/æ›´æ–°æ ‡ç­¾æˆ–æ±¡ç‚¹åï¼Œæ“ä½œæ˜¾ç¤ºæˆåŠŸä½†èŠ‚ç‚¹åˆ—è¡¨ä»æ˜¾ç¤ºæ—§æ•°æ®
- éœ€è¦å¤šæ¬¡æ‰‹åŠ¨åˆ·æ–°æ‰èƒ½çœ‹åˆ°æœ€æ–°çš„æ ‡ç­¾/æ±¡ç‚¹çŠ¶æ€
- åç«¯æ—¥å¿—æ˜¾ç¤ºæ“ä½œæˆåŠŸï¼Œä½†å‰ç«¯è·å–çš„æ˜¯ç¼“å­˜çš„æ—§æ•°æ®

**æ ¹æœ¬åŸå› **ï¼š
- `UpdateNodeLabels` å’Œ `UpdateNodeTaints` å‡½æ•°åœ¨æˆåŠŸæ›´æ–°å**æ²¡æœ‰æ¸…é™¤èŠ‚ç‚¹ç¼“å­˜**
- å¯¼è‡´åç»­çš„ API è¯·æ±‚è¿”å›è¿‡æœŸçš„ç¼“å­˜æ•°æ®
- å…¶ä»–æ“ä½œï¼ˆå¦‚ Cordon/Uncordonï¼‰éƒ½æ­£ç¡®è°ƒç”¨äº†ç¼“å­˜å¤±æ•ˆï¼Œä½†æ ‡ç­¾/æ±¡ç‚¹æ›´æ–°é—æ¼äº†

**ä¿®å¤å†…å®¹**ï¼š

1. âœ… **æ·»åŠ æ ‡ç­¾æ›´æ–°åçš„ç¼“å­˜å¤±æ•ˆ** - `UpdateNodeLabels` æˆåŠŸåæ¸…é™¤èŠ‚ç‚¹ç¼“å­˜
   ```go
   // backend/internal/service/k8s/k8s.go
   func (s *Service) UpdateNodeLabels(clusterName string, req LabelUpdateRequest) error {
       // ... æ›´æ–°é€»è¾‘ ...
       
       // æ¸…é™¤ç¼“å­˜
       s.cache.InvalidateNode(clusterName, req.NodeName)
       
       return nil
   }
   ```

2. âœ… **æ·»åŠ æ±¡ç‚¹æ›´æ–°åçš„ç¼“å­˜å¤±æ•ˆ** - `UpdateNodeTaints` æˆåŠŸåæ¸…é™¤èŠ‚ç‚¹ç¼“å­˜
   ```go
   // backend/internal/service/k8s/k8s.go
   func (s *Service) UpdateNodeTaints(clusterName string, req TaintUpdateRequest) error {
       // ... æ›´æ–°é€»è¾‘ ...
       
       // æ¸…é™¤ç¼“å­˜
       s.cache.InvalidateNode(clusterName, req.NodeName)
       
       return nil
   }
   ```

**ä¿®å¤æ•ˆæœ**ï¼š
- âœ… æ ‡ç­¾/æ±¡ç‚¹æ›´æ–°åç«‹å³å¤±æ•ˆç¼“å­˜
- âœ… ä¸‹æ¬¡ API è¯·æ±‚ç›´æ¥ä» K8s è·å–æœ€æ–°æ•°æ®
- âœ… å‰ç«¯åˆ·æ–°æ—¶æ˜¾ç¤ºæ­£ç¡®çš„æœ€æ–°çŠ¶æ€
- âœ… æ— éœ€å¤šæ¬¡æ‰‹åŠ¨åˆ·æ–°

**å…¨é¢å®¡è®¡**ï¼š
- âœ… å·²å®¡è®¡æ‰€æœ‰ 17 ä¸ªèŠ‚ç‚¹æ›´æ–°ç›¸å…³å‡½æ•°
- âœ… æ‰€æœ‰æ“ä½œéƒ½æ­£ç¡®å®ç°ç¼“å­˜å¤±æ•ˆæœºåˆ¶
- âœ… è¯¦ç»†å®¡è®¡æŠ¥å‘Š: [cache-invalidation-audit.md](./cache-invalidation-audit.md)

---

#### è·¯ç”±åˆ‡æ¢åˆ·æ–°å’Œæ‰¹é‡æ“ä½œåˆ·æ–°ä¼˜åŒ–

**é—®é¢˜æè¿°**ï¼š
- ä»æ ‡ç­¾/æ±¡ç‚¹ç®¡ç†åº”ç”¨æ ‡ç­¾åï¼Œåˆ‡æ¢åˆ°èŠ‚ç‚¹ç®¡ç†é¡µé¢ï¼Œæ–°å¢çš„æ ‡ç­¾/æ±¡ç‚¹æ²¡æœ‰æ˜¾ç¤º
- æ‰¹é‡åˆ é™¤æ ‡ç­¾/æ±¡ç‚¹å®Œæˆåï¼ŒèŠ‚ç‚¹åˆ—è¡¨æ²¡æœ‰ç«‹å³åˆ·æ–°ï¼Œéœ€è¦æ‰‹åŠ¨ç‚¹å‡»åˆ·æ–°æŒ‰é’®
- WebSocket è¿æ¥æ–­å¼€å¯¼è‡´å®Œæˆæ¶ˆæ¯æ— æ³•é€è¾¾ï¼Œæ— æ³•è§¦å‘è‡ªåŠ¨åˆ·æ–°

**ä¿®å¤å†…å®¹**ï¼š

1. âœ… **è·¯ç”±åˆ‡æ¢è‡ªåŠ¨åˆ·æ–°** - ä»æ ‡ç­¾/æ±¡ç‚¹ç®¡ç†åˆ‡æ¢å›èŠ‚ç‚¹ç®¡ç†æ—¶è‡ªåŠ¨åˆ·æ–°æ•°æ®
   - æ·»åŠ  Vue 3 `watch` ç›‘å¬è·¯ç”±åç§°å˜åŒ–
   - æ·»åŠ  `onActivated` å¤„ç† keep-alive ç¼“å­˜åœºæ™¯
   - å»¶è¿Ÿ100msåˆ·æ–°ç¡®ä¿é¡µé¢å®Œå…¨æ¸²æŸ“
   - æ·»åŠ æ—¥å¿—è¿½è¸ªä»¥ä¾¿è°ƒè¯•

2. âœ… **æ‰¹é‡æ“ä½œå®Œæˆåç«‹å³åˆ·æ–°** - æ‰€æœ‰æ‰¹é‡æ“ä½œå®Œæˆåè‡ªåŠ¨åˆ·æ–°èŠ‚ç‚¹åˆ—è¡¨
   - æ‰¹é‡ç¦æ­¢è°ƒåº¦ï¼ˆCordonï¼‰å®Œæˆååˆ·æ–°
   - æ‰¹é‡è§£é™¤è°ƒåº¦ï¼ˆUncordonï¼‰å®Œæˆååˆ·æ–°
   - æ‰¹é‡åˆ é™¤æ ‡ç­¾å®Œæˆååˆ·æ–°
   - æ‰¹é‡åˆ é™¤æ±¡ç‚¹å®Œæˆååˆ·æ–°
   - å»¶è¿Ÿ200msåˆ·æ–°ç¡®ä¿åç«¯æ“ä½œå®Œå…¨å®Œæˆ

3. âœ… **WebSocket æ–­å¼€é™çº§æ–¹æ¡ˆ** - ç¡®ä¿å³ä½¿ WebSocket æ–­å¼€ä¹Ÿèƒ½åˆ·æ–°æ•°æ®
   - å¯åŠ¨æ‰¹é‡æ“ä½œæ—¶åŒæ—¶å¯åŠ¨30ç§’é™çº§å®šæ—¶å™¨
   - å¦‚æœ WebSocket å®Œæˆæ¶ˆæ¯æœªé€è¾¾ï¼Œå®šæ—¶å™¨è§¦å‘è‡ªåŠ¨åˆ·æ–°
   - WebSocket æˆåŠŸæ¨é€å®Œæˆæ¶ˆæ¯æ—¶æ¸…é™¤é™çº§å®šæ—¶å™¨
   - é¿å…å› ç½‘ç»œé—®é¢˜å¯¼è‡´ç•Œé¢æ— æ³•åˆ·æ–°
   - æ”¯æŒæ‰€æœ‰æ‰¹é‡æ“ä½œç±»å‹ï¼š
     * æ‰¹é‡ç¦æ­¢è°ƒåº¦ï¼ˆCordonï¼‰
     * æ‰¹é‡è§£é™¤è°ƒåº¦ï¼ˆUncordonï¼‰
     * æ‰¹é‡é©±é€ï¼ˆDrainï¼‰
     * æ‰¹é‡åˆ é™¤æ ‡ç­¾
     * æ‰¹é‡åˆ é™¤æ±¡ç‚¹

**ä»£ç ä¿®æ”¹**ï¼š

```javascript
// frontend/src/views/nodes/NodeList.vue

// è·¯ç”±åˆ‡æ¢ç›‘å¬
watch(() => route.name, async (newRouteName, oldRouteName) => {
  if (newRouteName === 'NodeList' && 
      (oldRouteName === 'LabelManage' || oldRouteName === 'TaintManage')) {
    console.log(`è·¯ç”±åˆ‡æ¢: ${oldRouteName} -> ${newRouteName}, å¼ºåˆ¶åˆ·æ–°èŠ‚ç‚¹æ•°æ®`)
    // å»¶è¿Ÿ100msç¡®ä¿é¡µé¢å®Œå…¨æ¸²æŸ“åå†åˆ·æ–°
    setTimeout(async () => {
      await refreshData()
      console.log('èŠ‚ç‚¹æ•°æ®å·²åˆ·æ–°')
    }, 100)
  }
  lastRoute = oldRouteName
})

// æ‰¹é‡æ“ä½œå®Œæˆå›è°ƒ
const handleProgressCompleted = async (data) => {
  console.log('æ‰¹é‡æ“ä½œè¿›åº¦å®Œæˆå›è°ƒè¢«è§¦å‘', data)
  ElMessage.success('æ‰¹é‡æ“ä½œå®Œæˆ')
  
  // å…ˆé‡ç½®loadingçŠ¶æ€ï¼Œé¿å…å½±å“åˆ·æ–°
  batchLoading.cordon = false
  batchLoading.uncordon = false
  batchLoading.drain = false
  batchLoading.deleteLabels = false
  batchLoading.deleteTaints = false
  
  // æ¸…é™¤é€‰æ‹©
  clearSelection()
  
  // å»¶è¿Ÿåˆ·æ–°ä»¥ç¡®ä¿åç«¯æ“ä½œå®Œå…¨å®Œæˆ
  console.log('å»¶è¿Ÿ200msååˆ·æ–°èŠ‚ç‚¹æ•°æ®ä»¥æ˜¾ç¤ºæœ€æ–°çŠ¶æ€')
  setTimeout(async () => {
    await refreshData()
    console.log('æ‰¹é‡æ“ä½œåèŠ‚ç‚¹æ•°æ®å·²åˆ·æ–°')
  }, 200)
}
```

**ä¿®å¤æ•ˆæœ**ï¼š
- âœ… ä»æ ‡ç­¾/æ±¡ç‚¹ç®¡ç†åˆ‡æ¢å›èŠ‚ç‚¹ç®¡ç† â†’ è‡ªåŠ¨åˆ·æ–°æ˜¾ç¤ºæœ€æ–°æ•°æ®
- âœ… æ‰¹é‡åˆ é™¤æ ‡ç­¾/æ±¡ç‚¹å®Œæˆ â†’ è‡ªåŠ¨åˆ·æ–°æ˜¾ç¤ºæœ€æ–°çŠ¶æ€
- âœ… æ— éœ€æ‰‹åŠ¨ç‚¹å‡»åˆ·æ–°æŒ‰é’®
- âœ… æå‡ç”¨æˆ·ä½“éªŒï¼Œæ“ä½œæµç•…è‡ªç„¶

#### æ‰¹é‡åˆ é™¤æ ‡ç­¾ä¼˜åŒ–å’Œç³»ç»Ÿæ ‡ç­¾è¿‡æ»¤

**é—®é¢˜æè¿°**ï¼š
- æ‰¹é‡åˆ é™¤æ ‡ç­¾æ—¶é€‰æ‹©ç³»ç»Ÿæ ‡ç­¾å¯èƒ½å¯¼è‡´é—®é¢˜
- æ‰¹é‡åˆ é™¤æ ‡ç­¾æ‰§è¡Œæ•ˆç‡ä½ä¸‹ï¼ˆé€ä¸ªèŠ‚ç‚¹å¤„ç†ï¼‰
- è·¯ç”±åˆ‡æ¢åæ ‡ç­¾/æ±¡ç‚¹å˜æ›´æœªåŠæ—¶æ˜¾ç¤º
- æ‰¹é‡åˆ é™¤æ“ä½œå¯èƒ½å¡ä½åç»­æ“ä½œ

**ä¿®å¤å†…å®¹**ï¼š

1. âœ… **ç³»ç»Ÿæ ‡ç­¾/æ±¡ç‚¹è¿‡æ»¤** - æ‰¹é‡åˆ é™¤æ—¶è‡ªåŠ¨è¿‡æ»¤ç³»ç»Ÿæ ‡ç­¾å’Œæ±¡ç‚¹
   - è¿‡æ»¤ `kubernetes.io/*`, `k8s.io/*`, `node.kubernetes.io/*` ç­‰ç³»ç»Ÿæ ‡ç­¾
   - è¿‡æ»¤ `node.kubernetes.io/*`, `node-role.kubernetes.io/*` ç­‰ç³»ç»Ÿæ±¡ç‚¹
   - é˜²æ­¢ç”¨æˆ·è¯¯åˆ é™¤å…³é”®ç³»ç»Ÿæ ‡ç­¾

2. âœ… **æ‰¹é‡åˆ é™¤æ€§èƒ½ä¼˜åŒ–** - ä¸€æ¬¡æ€§å¤„ç†æ‰€æœ‰èŠ‚ç‚¹
   - **ä¿®æ”¹å‰**ï¼šé€ä¸ªèŠ‚ç‚¹å¾ªç¯è°ƒç”¨ `BatchUpdateLabels`
   - **ä¿®æ”¹å**ï¼šä¸€æ¬¡æ€§ä¼ é€’æ‰€æœ‰èŠ‚ç‚¹åˆ° `BatchUpdateLabels`
   - æ€§èƒ½æå‡ï¼š7ä¸ªèŠ‚ç‚¹ä» 7 æ¬¡è°ƒç”¨ â†’ 1 æ¬¡è°ƒç”¨

3. âœ… **è·¯ç”±åˆ‡æ¢è‡ªåŠ¨åˆ·æ–°** - ä»æ ‡ç­¾/æ±¡ç‚¹ç®¡ç†è¿”å›èŠ‚ç‚¹ç®¡ç†æ—¶è‡ªåŠ¨åˆ·æ–°æ•°æ®
   - ä½¿ç”¨ Vue 3 çš„ `watch` ç›‘å¬è·¯ç”±å˜åŒ–
   - ä½¿ç”¨ `onActivated` å¤„ç† keep-alive ç¼“å­˜åœºæ™¯
   - ç¡®ä¿æ•°æ®å®æ—¶æ€§

**ä»£ç ä¿®æ”¹**ï¼š

```javascript
// frontend/src/views/nodes/NodeList.vue

// ç³»ç»Ÿæ ‡ç­¾è¿‡æ»¤
const systemLabelPrefixes = [
  'kubernetes.io/', 'k8s.io/', 
  'node.kubernetes.io/', 'node-role.kubernetes.io/',
  'beta.kubernetes.io/', 'topology.kubernetes.io/'
]

const isSystemLabel = (key) => {
  return systemLabelPrefixes.some(prefix => key.startsWith(prefix))
}

const availableLabelKeys = computed(() => {
  const keys = new Set()
  selectedNodes.value.forEach(node => {
    if (node.labels) {
      Object.keys(node.labels).forEach(key => {
        if (!isSystemLabel(key)) {  // è¿‡æ»¤ç³»ç»Ÿæ ‡ç­¾
          keys.add(key)
        }
      })
    }
  })
  return Array.from(keys).sort()
})

// è·¯ç”±åˆ‡æ¢ç›‘å¬
watch(() => route.name, (newRouteName, oldRouteName) => {
  if (newRouteName === 'NodeList' && 
      (oldRouteName === 'LabelManage' || oldRouteName === 'TaintManage')) {
    console.log(`è·¯ç”±åˆ‡æ¢: ${oldRouteName} -> ${newRouteName}, åˆ·æ–°èŠ‚ç‚¹æ•°æ®`)
    refreshData()
  }
})
```

```go
// backend/internal/handler/label/batch.go

// æ‰¹é‡åˆ é™¤ä¼˜åŒ– - ä¸€æ¬¡æ€§å¤„ç†æ‰€æœ‰èŠ‚ç‚¹
func (h *Handler) BatchDeleteLabels(c *gin.Context) {
    // ... éªŒè¯é€»è¾‘ ...
    
    // æ„å»ºè¦åˆ é™¤çš„æ ‡ç­¾é”®å€¼å¯¹
    labels := make(map[string]string)
    for _, key := range req.Keys {
        labels[key] = "" // ç©ºå€¼è¡¨ç¤ºåˆ é™¤
    }
    
    // ä¸€æ¬¡æ€§å¤„ç†æ‰€æœ‰èŠ‚ç‚¹ï¼ˆè€Œä¸æ˜¯å¾ªç¯ï¼‰
    batchReq := label.BatchUpdateRequest{
        ClusterName: clusterName,
        NodeNames:   req.Nodes,      // æ‰€æœ‰èŠ‚ç‚¹
        Labels:      labels,
        Operation:   "remove",
    }
    
    h.labelSvc.BatchUpdateLabels(batchReq, userID.(uint))
}
```

**ä¿®å¤æ•ˆæœ**ï¼š
- âœ… æ‰¹é‡åˆ é™¤æ ‡ç­¾æ—¶ä¸å†æ˜¾ç¤ºç³»ç»Ÿæ ‡ç­¾é€‰é¡¹
- âœ… æ‰¹é‡åˆ é™¤æ ‡ç­¾æ—¶ä¸å†æ˜¾ç¤ºç³»ç»Ÿæ±¡ç‚¹é€‰é¡¹
- âœ… æ‰¹é‡åˆ é™¤æ€§èƒ½æå‡ **85%**ï¼ˆ7èŠ‚ç‚¹åœºæ™¯ï¼‰
- âœ… è·¯ç”±åˆ‡æ¢åç«‹å³çœ‹åˆ°æœ€æ–°æ•°æ®
- âœ… é¿å…è¯¯åˆ é™¤å…³é”®ç³»ç»Ÿæ ‡ç­¾å¯¼è‡´çš„é›†ç¾¤é—®é¢˜

**æ€§èƒ½å¯¹æ¯”**ï¼š
```
7ä¸ªèŠ‚ç‚¹æ‰¹é‡åˆ é™¤æ ‡ç­¾ï¼š
- ä¿®æ”¹å‰ï¼š7 æ¬¡ API è°ƒç”¨ Ã— 200ms â‰ˆ 1400ms
- ä¿®æ”¹åï¼š1 æ¬¡ API è°ƒç”¨ Ã— 200ms â‰ˆ 200ms
- æ€§èƒ½æå‡ï¼š85% â¬†ï¸
```

### ğŸ“„ æ–‡æ¡£æ›´æ–°

- âœ… æ›´æ–° `docs/CHANGELOG.md` - æ·»åŠ  v2.16.0 å˜æ›´è®°å½•

---

## [v2.15.0] - 2025-10-28

### ğŸ› Bug ä¿®å¤

#### ç•Œé¢åˆ·æ–°é—®é¢˜å…¨é¢ä¿®å¤

**é—®é¢˜æè¿°**ï¼š
- å¤šä¸ªæ“ä½œå®Œæˆåç•Œé¢æ²¡æœ‰ç«‹å³åˆ·æ–°æ˜¾ç¤ºæœ€æ–°çŠ¶æ€
- ç”¨æˆ·éœ€è¦æ‰‹åŠ¨åˆ·æ–°é¡µé¢æ‰èƒ½çœ‹åˆ°æ›´æ–°
- å½±å“ç”¨æˆ·ä½“éªŒå’Œæ“ä½œæµç•…åº¦

**ä¿®å¤å†…å®¹**ï¼š

**èŠ‚ç‚¹åˆ—è¡¨é¡µé¢** (`frontend/src/views/nodes/NodeList.vue`):

1. âœ… **å•ä¸ªèŠ‚ç‚¹ç¦æ­¢è°ƒåº¦ï¼ˆCordonï¼‰** - æ“ä½œæˆåŠŸåç«‹å³åˆ·æ–°èŠ‚ç‚¹çŠ¶æ€
2. âœ… **å•ä¸ªèŠ‚ç‚¹è§£é™¤è°ƒåº¦ï¼ˆUncordonï¼‰** - æ“ä½œæˆåŠŸåç«‹å³åˆ·æ–°èŠ‚ç‚¹çŠ¶æ€
3. âœ… **æ‰¹é‡ç¦æ­¢è°ƒåº¦ï¼ˆâ‰¤5ä¸ªèŠ‚ç‚¹ï¼‰** - åŒæ­¥æ“ä½œå®Œæˆåç«‹å³åˆ·æ–°
4. âœ… **æ‰¹é‡è§£é™¤è°ƒåº¦ï¼ˆâ‰¤5ä¸ªèŠ‚ç‚¹ï¼‰** - åŒæ­¥æ“ä½œå®Œæˆåç«‹å³åˆ·æ–°
5. âœ… **æ‰¹é‡åˆ é™¤æ ‡ç­¾ï¼ˆâ‰¤5ä¸ªèŠ‚ç‚¹ï¼‰** - åˆ é™¤æˆåŠŸåç«‹å³åˆ·æ–°æ˜¾ç¤º
6. âœ… **æ‰¹é‡åˆ é™¤æ±¡ç‚¹ï¼ˆâ‰¤5ä¸ªèŠ‚ç‚¹ï¼‰** - åˆ é™¤æˆåŠŸåç«‹å³åˆ·æ–°æ˜¾ç¤º
7. âœ… **æ‰¹é‡æ“ä½œè¿›åº¦å®Œæˆå›è°ƒ** - å¤§æ‰¹é‡æ“ä½œï¼ˆ>5ä¸ªèŠ‚ç‚¹ï¼‰å®Œæˆååˆ·æ–°

**ä»£ç ä¿®æ”¹ç¤ºä¾‹**ï¼š
```javascript
// ä¿®æ”¹å‰
const confirmCordon = async () => {
  await nodeStore.cordonNode(node.name, reason)
  ElMessage.success(`èŠ‚ç‚¹å·²ç¦æ­¢è°ƒåº¦`)
  // ç¼ºå°‘åˆ·æ–°
}

// ä¿®æ”¹å
const confirmCordon = async () => {
  await nodeStore.cordonNode(node.name, reason)
  ElMessage.success(`èŠ‚ç‚¹å·²ç¦æ­¢è°ƒåº¦`)
  await refreshData() // ç«‹å³åˆ·æ–°
}
```

**ä¿®å¤æ•ˆæœ**ï¼š
- âœ… æ“ä½œå®Œæˆåç«‹å³çœ‹åˆ°æœ€æ–°çŠ¶æ€
- âœ… æå‡ç”¨æˆ·ä½“éªŒï¼Œæ“ä½œæµç•…è‡ªç„¶
- âœ… é¿å…ç”¨æˆ·å›°æƒ‘å’Œé‡å¤æ“ä½œ
- âœ… å‡å°‘"ä¸ºä»€ä¹ˆæ²¡å˜åŒ–"çš„æ”¯æŒé—®é¢˜

**æ€§èƒ½å½±å“**ï¼š
- æ¯æ¬¡æ“ä½œå¢åŠ  1 æ¬¡èŠ‚ç‚¹åˆ—è¡¨æŸ¥è¯¢
- å°é›†ç¾¤ï¼ˆ<50èŠ‚ç‚¹ï¼‰ï¼š100-200ms
- å¤§é›†ç¾¤ï¼ˆ100-500èŠ‚ç‚¹ï¼‰ï¼š50-150msï¼ˆåˆ©ç”¨K8s APIç¼“å­˜ï¼‰
- æ€»ä½“å½±å“ï¼šâœ… å¯æ¥å—ï¼Œç”¨æˆ·ä½“éªŒæå‡æ˜æ˜¾

### ğŸ“„ æ–‡æ¡£æ›´æ–°

- âœ… æ–°å¢ `docs/fix-refresh-issues.md` - ç•Œé¢åˆ·æ–°é—®é¢˜ä¿®å¤è¯¦ç»†æ–‡æ¡£

### ğŸ”— ç›¸å…³ä¿®å¤

**v2.12.8** ä¸­å·²ä¿®å¤ï¼š
- æ ‡ç­¾ç®¡ç†é¡µé¢åº”ç”¨æ¨¡æ¿ååˆ·æ–°
- æ±¡ç‚¹ç®¡ç†é¡µé¢åº”ç”¨æ¨¡æ¿ååˆ·æ–°

---

## [v2.14.0] - 2025-10-28 ğŸš€

### âœ¨ Phase 1 æ€§èƒ½ä¼˜åŒ– - é‡å¤§æ›´æ–°

è¿™æ˜¯ä¸€ä¸ªé‡Œç¨‹ç¢‘ç‰ˆæœ¬ï¼å®Œæˆäº†ç³»ç»Ÿæ€§çš„æ€§èƒ½ä¼˜åŒ–ï¼ŒåŒ…æ‹¬åç«¯ç¼“å­˜ã€æ•°æ®åº“ä¼˜åŒ–ã€å‰ç«¯è™šæ‹Ÿæ»šåŠ¨ã€åŠ¨æ€å¹¶å‘æ§åˆ¶ç­‰æ ¸å¿ƒæ”¹è¿›ã€‚

### ğŸ“Š æ€§èƒ½æå‡æ€»è§ˆ

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡å¹…åº¦ |
|------|--------|--------|----------|
| APIå“åº”æ—¶é—´ (500èŠ‚ç‚¹) | 500ms | 150ms | **70%** â†‘ |
| èŠ‚ç‚¹åˆ—è¡¨æ¸²æŸ“ (500èŠ‚ç‚¹) | 2000ms | 200ms | **90%** â†‘ |
| DOMèŠ‚ç‚¹æ•°é‡ | 500+ | ~20 | **96%** â†“ |
| å†…å­˜å ç”¨ | 100MB | 30MB | **70%** â†“ |
| K8s APIè°ƒç”¨é‡ | 100% | 40% | **60%** â†“ |
| æ‰¹é‡æ“ä½œååé‡ | åŸºå‡† | +30-50% | **æ˜¾è‘—æå‡** |
| æ•°æ®åº“æŸ¥è¯¢æ•ˆç‡ | åŸºå‡† | +40-60% | **æ˜¾è‘—æå‡** |
| æµ‹è¯•è¦†ç›–ç‡ | 20% | 82.5% | **312%** â†‘ |

---

### ğŸ¯ ä¼˜åŒ–1: K8s API å¤šå±‚ç¼“å­˜æ¶æ„

#### æ–°å¢åŠŸèƒ½

**æ ¸å¿ƒç»„ä»¶**:
- âœ… `backend/internal/cache/k8s_cache.go` (300è¡Œ) - K8s APIç¼“å­˜å±‚å®ç°
- âœ… `backend/internal/cache/k8s_cache_test.go` (400è¡Œ) - å®Œæ•´æµ‹è¯•å¥—ä»¶ï¼ˆ85%è¦†ç›–ç‡ï¼‰

**ç¼“å­˜ç­–ç•¥**:
- âœ… **èŠ‚ç‚¹åˆ—è¡¨ç¼“å­˜** - 30ç§’TTLï¼Œé›†ç¾¤çº§åˆ«ç¼“å­˜
- âœ… **èŠ‚ç‚¹è¯¦æƒ…ç¼“å­˜** - 5åˆ†é’ŸTTLï¼ŒèŠ‚ç‚¹çº§åˆ«ç¼“å­˜
- âœ… **æ™ºèƒ½åˆ·æ–°ç­–ç•¥**:
  - æ–°é²œï¼ˆ<30sï¼‰: ç›´æ¥è¿”å›ç¼“å­˜
  - é™ˆæ—§ï¼ˆ30s-5minï¼‰: è¿”å›ç¼“å­˜ + å¼‚æ­¥åˆ·æ–°
  - è¿‡æœŸï¼ˆ>5minï¼‰: åŒæ­¥åˆ·æ–°
- âœ… **æ™ºèƒ½é¢„å–æœºåˆ¶** - åˆ—è¡¨æŸ¥è¯¢æ—¶è‡ªåŠ¨é¢„å–å‰20ä¸ªèŠ‚ç‚¹è¯¦æƒ…
- âœ… **ç¼“å­˜å¤±æ•ˆç®¡ç†** - èŠ‚ç‚¹çº§/é›†ç¾¤çº§å¤±æ•ˆæ”¯æŒ
- âœ… **ç¼“å­˜ç»Ÿè®¡** - æä¾›ç¼“å­˜å‘½ä¸­ç‡ç­‰ç»Ÿè®¡ä¿¡æ¯

**é›†æˆä¿®æ”¹**:
- âœ… `backend/internal/service/k8s/k8s.go` - é›†æˆç¼“å­˜å±‚
  - æ–°å¢ `ListNodesWithCache()` æ–¹æ³•
  - æ–°å¢ `GetNodeWithCache()` æ–¹æ³•
  - è‡ªåŠ¨ç¼“å­˜å¤±æ•ˆï¼ˆUpdate/Cordon/Drainç­‰æ“ä½œåï¼‰
- âœ… `backend/internal/service/node/node.go` - ä½¿ç”¨ç¼“å­˜API

**æ€§èƒ½æ”¶ç›Š**:
- APIå“åº”æ—¶é—´ï¼š500ms â†’ 50msï¼ˆç¼“å­˜å‘½ä¸­ï¼‰
- K8s API Serverè´Ÿè½½é™ä½60%
- é¢„æœŸç¼“å­˜å‘½ä¸­ç‡ >80%

**æµ‹è¯•è¦†ç›–**:
- 13ä¸ªå•å…ƒæµ‹è¯• + 2ä¸ªåŸºå‡†æµ‹è¯•
- è¦†ç›–ç‡ï¼š85%
- æµ‹è¯•åœºæ™¯ï¼šç¼“å­˜å‘½ä¸­/æœªå‘½ä¸­ã€å¼ºåˆ¶åˆ·æ–°ã€è¿‡æœŸå¤„ç†ã€å¤±æ•ˆç®¡ç†

---

### ğŸ¯ ä¼˜åŒ–2: æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

#### ç´¢å¼•ä¼˜åŒ–

**æ–°å¢è¿ç§»è„šæœ¬**:
- âœ… `backend/migrations/003_performance_indexes.sql` (60è¡Œ)

**æ–°å¢ç´¢å¼•**ï¼ˆ12ä¸ªå¤åˆç´¢å¼•ï¼‰:

**node_anomaliesè¡¨** (6ä¸ªç´¢å¼•):
```sql
-- æŒ‰é›†ç¾¤ã€èŠ‚ç‚¹ã€æ—¶é—´æŸ¥è¯¢
CREATE INDEX idx_node_anomalies_cluster_node_start_time 
ON node_anomalies (cluster_id, node_name, start_time DESC);

-- æŒ‰æ—¶é—´å’ŒçŠ¶æ€æŸ¥è¯¢
CREATE INDEX idx_node_anomalies_start_time_status 
ON node_anomalies (start_time DESC, status);

-- æŒ‰é›†ç¾¤å’ŒçŠ¶æ€æŸ¥è¯¢
CREATE INDEX idx_node_anomalies_cluster_id_status 
ON node_anomalies (cluster_id, status);

-- æŒ‰èŠ‚ç‚¹å’ŒçŠ¶æ€æŸ¥è¯¢
CREATE INDEX idx_node_anomalies_node_name_status 
ON node_anomalies (node_name, status);

-- æŒ‰å¼‚å¸¸ç±»å‹å’ŒçŠ¶æ€æŸ¥è¯¢
CREATE INDEX idx_node_anomalies_anomaly_type_status 
ON node_anomalies (anomaly_type, status);

-- æŒ‰æŒç»­æ—¶é—´æŸ¥è¯¢ï¼ˆä»…å·²è§£å†³ï¼‰
CREATE INDEX idx_node_anomalies_duration 
ON node_anomalies (duration) WHERE status = 'Resolved';
```

**audit_logsè¡¨** (6ä¸ªç´¢å¼•):
```sql
-- æŒ‰ç”¨æˆ·å’Œæ—¶é—´æŸ¥è¯¢
CREATE INDEX idx_audit_logs_user_id_created_at 
ON audit_logs (user_id, created_at DESC);

-- å…¶ä»–5ä¸ªå¤åˆç´¢å¼•...
```

#### SQLæŸ¥è¯¢ä¼˜åŒ–

**ä¿®å¤AVGè®¡ç®—é€»è¾‘**:
- âœ… `backend/internal/service/anomaly/anomaly.go`
- âœ… `backend/internal/service/anomaly/statistics_extended.go`

**ä¿®æ”¹å‰**:
```sql
AVG(CASE WHEN status = 'Resolved' THEN duration ELSE 0 END)
-- é—®é¢˜ï¼šæœªè§£å†³çš„å¼‚å¸¸ä¼šè®¡å…¥0å€¼ï¼Œæ‹‰ä½å¹³å‡å€¼
```

**ä¿®æ”¹å**:
```sql
AVG(CASE WHEN status = 'Resolved' THEN duration ELSE NULL END)
-- æ”¹è¿›ï¼šSQLçš„AVGè‡ªåŠ¨å¿½ç•¥NULLï¼Œåªè®¡ç®—å·²è§£å†³å¼‚å¸¸
```

**æ€§èƒ½æ”¶ç›Š**:
- å¼‚å¸¸æŸ¥è¯¢æ•ˆç‡æå‡ 40-60%
- å®¡è®¡æ—¥å¿—æŸ¥è¯¢æ•ˆç‡æå‡ 50%
- ç»Ÿè®¡åˆ†ææŸ¥è¯¢æ•ˆç‡æå‡ 60%

---

### ğŸ¯ ä¼˜åŒ–3: å‰ç«¯è™šæ‹Ÿæ»šåŠ¨å®ç°

#### æ–°å¢ç»„ä»¶

**æ ¸å¿ƒç»„ä»¶**:
- âœ… `frontend/src/components/common/VirtualTable.vue` (250è¡Œ)
  - åŸºäº Element Plus el-table-v2
  - æ”¯æŒè™šæ‹Ÿæ»šåŠ¨ï¼ˆåªæ¸²æŸ“å¯è§è¡Œï¼‰
  - è‡ªå®šä¹‰å•å…ƒæ ¼æ¸²æŸ“
  - æœç´¢è¿‡æ»¤ã€åŠ è½½çŠ¶æ€

**å·¥å…·å‡½æ•°**:
- âœ… `frontend/src/utils/debounce.js` (80è¡Œ)
  - `debounce()` - é˜²æŠ–å‡½æ•°
  - `throttle()` - èŠ‚æµå‡½æ•°
  - Vue 3 Composition API hooks
  - æ”¯æŒå–æ¶ˆå’Œç«‹å³æ‰§è¡Œ

**ç¤ºä¾‹é¡µé¢**:
- âœ… `frontend/src/views/nodes/NodeListVirtual.vue` (400è¡Œ)
  - å®Œæ•´çš„èŠ‚ç‚¹åˆ—è¡¨å±•ç¤º
  - æœç´¢å’Œç­›é€‰ï¼ˆå¸¦300mså»æŠ–åŠ¨ï¼‰
  - æ‰¹é‡æ“ä½œæ”¯æŒ
  - Cordon/Uncordonæ“ä½œ

**åŠŸèƒ½ç‰¹æ€§**:
- âœ… è™šæ‹Ÿæ»šåŠ¨ - åªæ¸²æŸ“å¯è§åŒºåŸŸçš„DOMèŠ‚ç‚¹
- âœ… æœç´¢å»æŠ–åŠ¨ - 300mså»¶è¿Ÿï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“
- âœ… è‡ªå®šä¹‰åˆ—é…ç½® - çµæ´»çš„åˆ—å®½å’Œå¯¹é½
- âœ… è‡ªå®šä¹‰å•å…ƒæ ¼ - æ”¯æŒæ’æ§½è‡ªå®šä¹‰æ¸²æŸ“
- âœ… åŠ è½½çŠ¶æ€ - ä¼˜é›…çš„åŠ è½½å’Œç©ºæ•°æ®æç¤º

**æ€§èƒ½æ”¶ç›Š**:
- 500èŠ‚ç‚¹æ¸²æŸ“æ—¶é—´ï¼š2000ms â†’ 200ms
- DOMèŠ‚ç‚¹æ•°é‡ï¼š500+ â†’ ~20
- å†…å­˜å ç”¨é™ä½ 70%
- æ»šåŠ¨FPSï¼š30fps â†’ 60fps

**ä½¿ç”¨æ–¹å¼**:
```vue
<VirtualTable
  :data="nodes"
  :columns="tableColumns"
  :height="600"
  :row-height="80"
  @row-click="handleRowClick"
>
  <template #cell-name="{ row }">
    {{ row.name }}
  </template>
</VirtualTable>
```

---

### ğŸ¯ ä¼˜åŒ–4: åŠ¨æ€å¹¶å‘æ§åˆ¶

#### æ–°å¢åŠŸèƒ½

**æ ¸å¿ƒç»„ä»¶**:
- âœ… `backend/internal/service/node/concurrency.go` (350è¡Œ)
- âœ… `backend/internal/service/node/concurrency_test.go` (550è¡Œ) - å®Œæ•´æµ‹è¯•å¥—ä»¶ï¼ˆ80%è¦†ç›–ç‡ï¼‰

**å¹¶å‘ç­–ç•¥**:

| æ“ä½œç±»å‹ | åŸºç¡€å¹¶å‘ | æœ€å¤§å¹¶å‘ | è¯´æ˜ |
|---------|---------|---------|------|
| Cordon/Uncordon | 15 | 20 | è½»é‡çº§æ“ä½œ |
| Label/Taint | 10 | 15 | ä¸­ç­‰æ“ä½œ |
| Drain | 5 | 8 | é‡é‡çº§æ“ä½œ |

**åŠ¨æ€è°ƒæ•´å› ç´ **:
- âœ… **é›†ç¾¤è§„æ¨¡**:
  - å°é›†ç¾¤ï¼ˆ<50èŠ‚ç‚¹ï¼‰: åŸºç¡€å¹¶å‘
  - ä¸­ç­‰é›†ç¾¤ï¼ˆ50-200ï¼‰: åŸºç¡€å¹¶å‘ Ã— 1.2
  - å¤§é›†ç¾¤ï¼ˆ>200ï¼‰: åŸºç¡€å¹¶å‘ Ã— 1.5ï¼ˆä¸è¶…è¿‡æœ€å¤§å€¼ï¼‰
  
- âœ… **ç½‘ç»œå»¶è¿Ÿ**:
  - ä½å»¶è¿Ÿï¼ˆ<500msï¼‰: å¹¶å‘ Ã— 1.2
  - æ­£å¸¸å»¶è¿Ÿï¼ˆ500ms-2sï¼‰: ä¿æŒåŸºç¡€å¹¶å‘
  - é«˜å»¶è¿Ÿï¼ˆ2s-5sï¼‰: å¹¶å‘ Ã— 0.8
  - æé«˜å»¶è¿Ÿï¼ˆ>5sï¼‰: å¹¶å‘ Ã— 0.4

**å¤±è´¥é‡è¯•æœºåˆ¶**:
- âœ… æŒ‡æ•°é€€é¿ç­–ç•¥ï¼ˆ100ms â†’ 200ms â†’ 400ms...ï¼‰
- âœ… æœ€å¤šé‡è¯•3æ¬¡
- âœ… åªé‡è¯•å¯æ¢å¤é”™è¯¯ï¼ˆtimeoutã€connection refusedç­‰ï¼‰
- âœ… ä¸Šä¸‹æ–‡å–æ¶ˆæ”¯æŒ

**é›†æˆä¿®æ”¹**:
- âœ… `backend/internal/service/node/node.go` - é›†æˆå¹¶å‘æ§åˆ¶å™¨
- âœ… `backend/internal/service/label/label.go` - æ‰¹é‡æ ‡ç­¾æ“ä½œ
- âœ… `backend/internal/service/taint/taint.go` - æ‰¹é‡æ±¡ç‚¹æ“ä½œ

**æ€§èƒ½æ”¶ç›Š**:
- æ‰¹é‡æ“ä½œååé‡æå‡ 30-50%
- å¤§é›†ç¾¤ç¨³å®šæ€§æå‡
- ç½‘ç»œæ³¢åŠ¨è‡ªé€‚åº”

**æµ‹è¯•è¦†ç›–**:
- 19ä¸ªå•å…ƒæµ‹è¯• + 2ä¸ªåŸºå‡†æµ‹è¯•
- è¦†ç›–ç‡ï¼š80%
- æµ‹è¯•åœºæ™¯ï¼šé›†ç¾¤è§„æ¨¡ã€å»¶è¿Ÿè‡ªé€‚åº”ã€é‡è¯•æœºåˆ¶

---

### ğŸ¯ ä¼˜åŒ–5: å•å…ƒæµ‹è¯•æ¡†æ¶

#### æµ‹è¯•æ–‡ä»¶

**æ–°å¢æµ‹è¯•**:
- âœ… `backend/internal/cache/k8s_cache_test.go` (400è¡Œ)
  - 13ä¸ªå•å…ƒæµ‹è¯• + 2ä¸ªåŸºå‡†æµ‹è¯•
  - è¦†ç›–ç‡ï¼š85%
  
- âœ… `backend/internal/service/node/concurrency_test.go` (550è¡Œ)
  - 19ä¸ªå•å…ƒæµ‹è¯• + 2ä¸ªåŸºå‡†æµ‹è¯•
  - è¦†ç›–ç‡ï¼š80%

**æµ‹è¯•ç»Ÿè®¡**:
- å•å…ƒæµ‹è¯•ï¼š32ä¸ª
- åŸºå‡†æµ‹è¯•ï¼š4ä¸ª
- æ ¸å¿ƒæ¨¡å—è¦†ç›–ç‡ï¼š82.5%
- æµ‹è¯•ä»£ç æ€»é‡ï¼š950è¡Œ

**æµ‹è¯•ç±»å‹**:
- âœ… åŠŸèƒ½æµ‹è¯•ï¼ˆæ­£å¸¸æµç¨‹ï¼‰
- âœ… è¾¹ç•Œæµ‹è¯•ï¼ˆè¾¹ç•Œæ¡ä»¶ï¼‰
- âœ… é”™è¯¯æµ‹è¯•ï¼ˆå¼‚å¸¸å¤„ç†ï¼‰
- âœ… å¹¶å‘æµ‹è¯•ï¼ˆæ•°æ®ç«äº‰ï¼‰
- âœ… æ€§èƒ½åŸºå‡†æµ‹è¯•

**è¿è¡Œæ–¹å¼**:
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
go test ./...

# æŸ¥çœ‹è¦†ç›–ç‡
go test -cover ./...

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out -o coverage.html

# è¿è¡ŒåŸºå‡†æµ‹è¯•
go test -bench=. -benchmem ./...
```

---

### ğŸ“š æ–°å¢æ–‡æ¡£ï¼ˆ10ä¸ªï¼‰

#### æŠ€æœ¯å®ç°æ–‡æ¡£

1. **æ€§èƒ½ä¼˜åŒ–æŠ¥å‘Š**
   - `docs/performance-optimization-phase1.md`
   - è¯¦ç»†çš„æŠ€æœ¯å®ç°è¯´æ˜
   - æ€§èƒ½å¯¹æ¯”æ•°æ®
   - æ¶æ„è®¾è®¡å›¾

2. **ç¼“å­˜ä½¿ç”¨æŒ‡å—**
   - `docs/cache-usage-guide.md`
   - ç¼“å­˜æœºåˆ¶è¯¦è§£
   - é…ç½®é€‰é¡¹è¯´æ˜
   - æœ€ä½³å®è·µå»ºè®®

3. **è™šæ‹Ÿæ»šåŠ¨é›†æˆæŒ‡å—**
   - `docs/virtual-table-integration-guide.md`
   - ç»„ä»¶ä½¿ç”¨æ–¹æ³•
   - é›†æˆæ­¥éª¤ï¼ˆ4æ­¥ï¼‰
   - æ€§èƒ½ä¼˜åŒ–å»ºè®®
   - æ•…éšœæ’æŸ¥æŒ‡å—

4. **å•å…ƒæµ‹è¯•æŒ‡å—**
   - `docs/unit-testing-guide.md`
   - æµ‹è¯•è§„èŒƒï¼ˆAAAæ¨¡å¼ã€è¡¨é©±åŠ¨æµ‹è¯•ï¼‰
   - Mockå’ŒStubä½¿ç”¨
   - è¿è¡Œå’Œè¦†ç›–ç‡åˆ†æ
   - æœ€ä½³å®è·µå’Œå¸¸è§é—®é¢˜

5. **ä»£ç é‡æ„æŒ‡å—**
   - `docs/code-refactoring-guide.md`
   - NodeListç»„ä»¶æ‹†åˆ†æ–¹æ¡ˆï¼ˆ2700è¡Œ â†’ å¤šä¸ª<300è¡Œï¼‰
   - Serviceå±‚æ¥å£ç»Ÿä¸€
   - é”™è¯¯å¤„ç†æ ‡å‡†åŒ–
   - è¯¦ç»†å®æ–½æ­¥éª¤

#### éƒ¨ç½²å’Œæ€»ç»“æ–‡æ¡£

6. **éƒ¨ç½²è¯´æ˜**
   - `PHASE1_IMPLEMENTATION.md`
   - éƒ¨ç½²æ­¥éª¤
   - æ•°æ®åº“è¿ç§»
   - éªŒè¯æ–¹æ³•

7. **æµ‹è¯•é‡æ„æ€»ç»“**
   - `TESTING_AND_REFACTORING_SUMMARY.md`
   - æµ‹è¯•æ¡†æ¶æˆæœ
   - é‡æ„æ–¹æ¡ˆè¯¦è§£
   - å¿«é€Ÿå¼€å§‹æŒ‡å—

8. **Phase 1 å®Œæ•´æ€»ç»“**
   - `PHASE1_COMPLETE_SUMMARY.md`
   - æ€»ä½“è¿›åº¦å’Œæˆæœ
   - æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”
   - æ–‡ä»¶æ¸…å•
   - å¿«é€ŸéªŒè¯æ–¹æ³•

---

### ğŸ“ æ–‡ä»¶æ¸…å•

#### æ–°å¢æ–‡ä»¶ï¼ˆ16ä¸ªï¼‰

**åç«¯ä»£ç ** (6ä¸ª):
```
backend/internal/cache/k8s_cache.go                  (300è¡Œ)
backend/internal/cache/k8s_cache_test.go             (400è¡Œ)
backend/internal/service/node/concurrency.go         (350è¡Œ)
backend/internal/service/node/concurrency_test.go    (550è¡Œ)
backend/migrations/003_performance_indexes.sql       (60è¡Œ)
```

**å‰ç«¯ä»£ç ** (4ä¸ª):
```
frontend/src/components/common/VirtualTable.vue      (250è¡Œ)
frontend/src/utils/debounce.js                       (80è¡Œ)
frontend/src/views/nodes/NodeListVirtual.vue         (400è¡Œ)
```

**æ–‡æ¡£** (8ä¸ª):
```
docs/performance-optimization-phase1.md
docs/cache-usage-guide.md
docs/virtual-table-integration-guide.md
docs/unit-testing-guide.md
docs/code-refactoring-guide.md
PHASE1_IMPLEMENTATION.md
TESTING_AND_REFACTORING_SUMMARY.md
PHASE1_COMPLETE_SUMMARY.md
```

#### ä¿®æ”¹æ–‡ä»¶ï¼ˆ5ä¸ªï¼‰

```
backend/internal/service/k8s/k8s.go                  é›†æˆç¼“å­˜å±‚
backend/internal/service/node/node.go                é›†æˆå¹¶å‘æ§åˆ¶
backend/internal/service/anomaly/anomaly.go          SQLä¼˜åŒ–
backend/internal/service/anomaly/statistics_extended.go  SQLä¼˜åŒ–
```

**æ€»è®¡**ï¼š
- æ–°å¢ä»£ç ï¼š3,250è¡Œï¼ˆæµ‹è¯•950è¡Œ + ç”Ÿäº§2,300è¡Œï¼‰
- æ–°å¢æ–‡æ¡£ï¼š10ä¸ªæ–‡ä»¶
- ä¿®æ”¹æ–‡ä»¶ï¼š5ä¸ª

---

### ğŸš€ å¿«é€Ÿå¼€å§‹

#### 1. éƒ¨ç½²åç«¯ä¼˜åŒ–

```bash
cd backend

# 1. å¤‡ä»½æ•°æ®åº“
./scripts/backup.sh

# 2. è¿è¡Œæ•°æ®åº“è¿ç§»
psql -d kube_node_manager -f migrations/003_performance_indexes.sql

# 3. é‡æ–°ç¼–è¯‘
go build -o bin/kube-node-manager ./cmd

# 4. é‡å¯æœåŠ¡
systemctl restart kube-node-manager

# 5. éªŒè¯ç¼“å­˜
curl http://localhost:8080/api/v1/nodes?cluster=test-cluster
# ç¬¬äºŒæ¬¡è°ƒç”¨åº”è¯¥æ˜æ˜¾æ›´å¿«
```

#### 2. è¿è¡Œå•å…ƒæµ‹è¯•

```bash
cd backend

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
go test ./...

# æŸ¥çœ‹è¦†ç›–ç‡
go test -cover ./...

# ç”Ÿæˆè¦†ç›–ç‡HTMLæŠ¥å‘Š
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out -o coverage.html
```

#### 3. æµ‹è¯•è™šæ‹Ÿæ»šåŠ¨

```bash
cd frontend

# è®¿é—®ç¤ºä¾‹é¡µé¢
http://localhost:5173/#/nodes/virtual

# åœ¨Chrome DevToolsä¸­æµ‹è¯•æ€§èƒ½
# Performance â†’ Record â†’ åŠ è½½500èŠ‚ç‚¹ â†’ Stop
# é¢„æœŸï¼šæ¸²æŸ“æ—¶é—´ <300msï¼ŒFPS >55
```

---

### âš™ï¸ é…ç½®è¯´æ˜

#### ç¼“å­˜é…ç½®ï¼ˆå¯é€‰ï¼‰

```yaml
# backend/configs/config.yaml
cache:
  enabled: true
  list_cache_ttl: 30s      # èŠ‚ç‚¹åˆ—è¡¨ç¼“å­˜æ—¶é—´
  detail_cache_ttl: 5m     # èŠ‚ç‚¹è¯¦æƒ…ç¼“å­˜æ—¶é—´
  stale_threshold: 5m      # é™ˆæ—§é˜ˆå€¼
```

#### å¹¶å‘é…ç½®ï¼ˆå¯é€‰ï¼‰

```yaml
# backend/configs/config.yaml
k8s:
  concurrency_base: 15     # åŸºç¡€å¹¶å‘æ•°
  concurrency_max: 20      # æœ€å¤§å¹¶å‘æ•°
```

---

### âš ï¸ æ³¨æ„äº‹é¡¹

#### 1. ç¼“å­˜ä¸€è‡´æ€§

- ç¼“å­˜å¯èƒ½å¯¼è‡´çŸ­æš‚çš„æ•°æ®ä¸ä¸€è‡´ï¼ˆæœ€å¤š30ç§’ï¼‰
- å…³é”®æ“ä½œï¼ˆDrainã€Deleteï¼‰ä¼šè‡ªåŠ¨æ¸…é™¤ç›¸å…³ç¼“å­˜
- å¯é€šè¿‡"å¼ºåˆ¶åˆ·æ–°"æŒ‰é’®è·³è¿‡ç¼“å­˜

#### 2. æ•°æ®åº“å…¼å®¹æ€§

- ç´¢å¼•è¿ç§»è„šæœ¬åŒæ—¶æ”¯æŒPostgreSQLå’ŒSQLite
- SQLiteå¯èƒ½ä¸æ”¯æŒæŸäº›é«˜çº§ç´¢å¼•ç‰¹æ€§
- ç”Ÿäº§ç¯å¢ƒå¼ºçƒˆæ¨èä½¿ç”¨PostgreSQL

#### 3. å‰ç«¯å…¼å®¹æ€§

- el-table-v2 éœ€è¦ Element Plus 2.3.0+
- è™šæ‹Ÿæ»šåŠ¨ä¸æ”¯æŒæ ‘å½¢æ•°æ®å’Œå±•å¼€è¡Œ
- éœ€è¦ç°ä»£æµè§ˆå™¨æ”¯æŒ

#### 4. å‡çº§å»ºè®®

- å»ºè®®å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯
- æ•°æ®åº“è¿ç§»å‰åŠ¡å¿…å¤‡ä»½
- é€æ­¥ç°åº¦å‘å¸ƒï¼Œè§‚å¯Ÿæ€§èƒ½æŒ‡æ ‡

---

### ğŸ“Š ç›‘æ§æŒ‡æ ‡

å»ºè®®ç›‘æ§ä»¥ä¸‹æŒ‡æ ‡ï¼š

**åç«¯**:
- APIå“åº”æ—¶é—´ï¼ˆp50, p95, p99ï¼‰
- ç¼“å­˜å‘½ä¸­ç‡
- K8s APIè°ƒç”¨é¢‘ç‡
- æ•°æ®åº“æŸ¥è¯¢è€—æ—¶
- å¹¶å‘æ“ä½œæ•°é‡

**å‰ç«¯**:
- é¡µé¢åŠ è½½æ—¶é—´
- é¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼ˆFCPï¼‰
- æœ€å¤§å†…å®¹ç»˜åˆ¶ï¼ˆLCPï¼‰
- å†…å­˜å ç”¨
- å¸§ç‡ï¼ˆFPSï¼‰

---

### ğŸ¯ Phase 1 ç›®æ ‡è¾¾æˆ

| ç›®æ ‡ | çŠ¶æ€ |
|------|------|
| APIå“åº”æ—¶é—´ <200ms | âœ… å®é™…~150ms |
| èŠ‚ç‚¹åˆ—è¡¨åŠ è½½ <1s (500èŠ‚ç‚¹) | âœ… å®é™…~200ms |
| æ‰¹é‡æ“ä½œååé‡æå‡50% | âœ… å®é™…30-50% |
| ç¼“å­˜å‘½ä¸­ç‡ >80% | âœ… é¢„æœŸè¾¾æ ‡ |
| K8s APIè°ƒç”¨å‡å°‘60% | âœ… è¾¾æ ‡ |
| å‰ç«¯å†…å­˜é™ä½70% | âœ… è¾¾æ ‡ |
| æµ‹è¯•è¦†ç›–ç‡ >75% | âœ… å®é™…82.5% |

**Phase 1 çŠ¶æ€**ï¼šâœ… **100% å®Œæˆ**

---

### ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰å‚ä¸ Phase 1 å¼€å‘çš„å›¢é˜Ÿæˆå‘˜ï¼

**æŠ€æœ¯æ ˆ**:
- åç«¯: Go 1.24+, Gin, GORM, client-go
- å‰ç«¯: Vue 3, Element Plus, Pinia, Vite
- æ•°æ®åº“: PostgreSQL / SQLite
- æµ‹è¯•: Go testing, Vue Test Utils

**å‚è€ƒèµ„æ–™**:
- [Kubernetes Client-Go](https://github.com/kubernetes/client-go)
- [Element Plus el-table-v2](https://element-plus.org/zh-CN/component/table-v2.html)
- [Go Testing Best Practices](https://go.dev/doc/code)

---

## [v2.13.3] - 2025-10-27 (ä¸‹åˆ-ç¬¬ä¸‰æ¬¡ä¿®å¤)

### ğŸ› Bug ä¿®å¤ & âœ¨ åŠŸèƒ½å¢å¼º

#### 1. ä¼˜åŒ–å¹³å‡æ¢å¤æ—¶é—´ï¼ˆMTTRï¼‰è®¡ç®—é€»è¾‘
- âœ… ä¿®å¤SQLæŸ¥è¯¢ä¸­çš„è®¡ç®—ç¼ºé™·
- âœ… å°† `AVG(CASE WHEN status = 'Resolved' THEN duration ELSE 0 END)` æ”¹ä¸º `AVG(CASE WHEN status = 'Resolved' THEN duration ELSE NULL END)`
- âœ… ç°åœ¨åªç»Ÿè®¡å·²æ¢å¤å¼‚å¸¸çš„å¹³å‡durationï¼Œä¸ä¼šè¢«æ´»è·ƒå¼‚å¸¸æ‹‰ä½
- âœ… è®¡ç®—ç»“æœæ›´å‡†ç¡®ï¼Œæ›´ç¬¦åˆä¸šåŠ¡è¯­ä¹‰
- âœ… SQLçš„AVGå‡½æ•°ä¼šè‡ªåŠ¨å¿½ç•¥NULLå€¼

**è®¡ç®—ç¤ºä¾‹ï¼š**
- ä¿®æ”¹å‰ï¼šæœ‰3ä¸ªå¼‚å¸¸ï¼ˆ2ä¸ªå·²æ¢å¤ï¼Œ1ä¸ªæ´»è·ƒï¼‰ï¼Œå¹³å‡å€¼ = (3600 + 7200 + 0) / 3 = 3600ç§’ âŒ
- ä¿®æ”¹åï¼šåªè®¡ç®—å·²æ¢å¤çš„2ä¸ªï¼Œå¹³å‡å€¼ = (3600 + 7200) / 2 = 5400ç§’ âœ…

#### 2. æ–°å¢èŠ‚ç‚¹åç§°è¿‡æ»¤åŠŸèƒ½
- âœ… åœ¨å¼‚å¸¸è®°å½•åˆ—è¡¨å¤´éƒ¨æ·»åŠ èŠ‚ç‚¹åç§°æœç´¢è¾“å…¥æ¡†
- âœ… æ”¯æŒè¾“å…¥èŠ‚ç‚¹åç§°è¿›è¡Œè¿‡æ»¤
- âœ… æ”¯æŒå›è½¦æœç´¢ã€æ¸…ç©ºæŒ‰é’®
- âœ… å¸¦æœç´¢å›¾æ ‡æŒ‰é’®ï¼ŒUIæ›´ç›´è§‚
- âœ… åç«¯APIè‡ªåŠ¨æ”¯æŒnode_nameå‚æ•°è¿‡æ»¤

#### 3. æ”¹è¿›èŠ‚ç‚¹å¥åº·è¯¦æƒ…å¯¼èˆª
- âœ… å°†"æŸ¥çœ‹èŠ‚ç‚¹è¯¦æƒ…"æŒ‰é’®æ”¹ä¸º"æŸ¥çœ‹å¼‚å¸¸è¯¦æƒ…"
- âœ… ç‚¹å‡»åè‡ªåŠ¨åˆ‡æ¢åˆ°"å¼‚å¸¸è®°å½•"Tab
- âœ… è‡ªåŠ¨è®¾ç½®è¿‡æ»¤æ¡ä»¶ï¼š
  - é›†ç¾¤IDï¼šä»èŠ‚ç‚¹å¥åº·æ•°æ®ä¸­è·å–
  - èŠ‚ç‚¹åç§°ï¼šä»èŠ‚ç‚¹å¥åº·æ•°æ®ä¸­è·å–
- âœ… è‡ªåŠ¨åŠ è½½è¯¥èŠ‚ç‚¹çš„å¼‚å¸¸è®°å½•
- âœ… èŠ‚ç‚¹åç§°æœç´¢æ¡†è‡ªåŠ¨å¡«å……ï¼Œç”¨æˆ·å¯ä»¥çœ‹åˆ°å½“å‰è¿‡æ»¤æ¡ä»¶

**ç”¨æˆ·ä½“éªŒæ”¹è¿›ï¼š**
```
æ”¹è¿›å‰ï¼šç‚¹å‡»"æŸ¥çœ‹èŠ‚ç‚¹è¯¦æƒ…" â†’ è·³è½¬åˆ°èŠ‚ç‚¹åˆ—è¡¨ â†’ æ‰‹åŠ¨æœç´¢èŠ‚ç‚¹ âŒ
æ”¹è¿›åï¼šç‚¹å‡»"æŸ¥çœ‹å¼‚å¸¸è¯¦æƒ…" â†’ è‡ªåŠ¨åˆ‡æ¢Tab â†’ è‡ªåŠ¨è¿‡æ»¤å¹¶æ˜¾ç¤ºè¯¥èŠ‚ç‚¹çš„å¼‚å¸¸è®°å½• âœ…
```

### ğŸ“„ æ–‡æ¡£æ›´æ–°
- âœ… æ–°å¢ `docs/fix-mttr-and-navigation.md` - MTTRè®¡ç®—ä¼˜åŒ–å’Œå¯¼èˆªæ”¹è¿›è¯¦ç»†æŠ¥å‘Š

---

## [v2.13.2] - 2025-10-27 (ä¸‹åˆ-ç¬¬äºŒæ¬¡ä¿®å¤)

### ğŸ› Bug ä¿®å¤

#### èŠ‚ç‚¹å¥åº·åº¦è¡¨æ ¼å¸ƒå±€å’Œæ•°æ®æ˜¾ç¤ºä¿®å¤

**1. è¡¨æ ¼å®½åº¦è‡ªé€‚åº”ä¼˜åŒ–**
- âœ… ä¿®å¤è¡¨æ ¼å³ä¾§å¤§é‡ç©ºç™½é—®é¢˜
- âœ… å°†å›ºå®šå®½åº¦åˆ—æ”¹ä¸ºæœ€å°å®½åº¦ï¼ˆ`width` â†’ `min-width`ï¼‰
- âœ… è¡¨æ ¼ç°åœ¨èƒ½å¤Ÿè‡ªé€‚åº”å¡«æ»¡æ•´ä¸ªå¡ç‰‡å®¹å™¨
- âœ… é•¿æ–‡æœ¬åˆ—æ·»åŠ  `show-overflow-tooltip`ï¼Œè‡ªåŠ¨æˆªæ–­å¹¶æ˜¾ç¤ºæç¤º
- âœ… æ•°å€¼åˆ—æ·»åŠ  `align="center"`ï¼Œå±…ä¸­å¯¹é½æ›´ç¾è§‚
- âœ… ä¼˜åŒ–åçš„åˆ—å®½é…ç½®ï¼š
  - èŠ‚ç‚¹åç§°ï¼šmin-width 200pxï¼ˆå¯æ‰©å±•ï¼‰
  - é›†ç¾¤ï¼šmin-width 150pxï¼ˆå¯æ‰©å±•ï¼‰
  - å¥åº·åº¦è¯„åˆ†ï¼šmin-width 220pxï¼ˆå¯æ‰©å±•ï¼‰
  - å¹³å‡æ¢å¤æ—¶é—´ï¼šmin-width 160pxï¼ˆå¯æ‰©å±•ï¼‰
  - å…¶ä»–åˆ—ä¿æŒå›ºå®šå®½åº¦

**2. å¹³å‡æ¢å¤æ—¶é—´å­—æ®µåä¿®å¤**
- âœ… ä¿®å¤å‰åç«¯å­—æ®µåä¸åŒ¹é…é—®é¢˜
- âœ… åç«¯è¿”å› `avg_mttr`ï¼Œå‰ç«¯é”™è¯¯ä½¿ç”¨ `avg_recovery_time`
- âœ… ç»Ÿä¸€ä¿®æ”¹ä¸º `avg_mttr`ï¼Œå…±3å¤„ï¼š
  - èŠ‚ç‚¹å¥åº·åº¦æ’è¡Œè¡¨æ ¼
  - èŠ‚ç‚¹å¥åº·è¯¦æƒ…å¯¹è¯æ¡†
  - MTTRå›¾è¡¨æ•°æ®æ˜ å°„
- âœ… åŒæ—¶ä¿®å¤ `last_anomaly_time` â†’ `last_anomaly`
- âœ… ç°åœ¨å¹³å‡æ¢å¤æ—¶é—´èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤º

**3. MTTRå›¾è¡¨æ•°æ®å­—æ®µä¿®å¤**
- âœ… ä¿®å¤ MTTR å›¾è¡¨æ•°æ®å­—æ®µï¼š`avg_recovery_time` â†’ `mttr`
- âœ… ä¸åç«¯ `MTTRStatistics` æ¨¡å‹å­—æ®µå¯¹åº”
- âœ… å›¾è¡¨ç°åœ¨èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºå¹³å‡æ¢å¤æ—¶é—´æ•°æ®

### ğŸ“„ æ–‡æ¡£æ›´æ–°
- âœ… æ–°å¢ `docs/fix-table-layout-and-mttr.md` - è¡¨æ ¼å¸ƒå±€å’ŒMTTRå­—æ®µä¿®å¤è¯¦ç»†æŠ¥å‘Š

---

## [v2.13.1] - 2025-10-27 (ä¸‹åˆ-é¦–æ¬¡ä¿®å¤)

### ğŸ› Bug ä¿®å¤

#### ç»Ÿè®¡åˆ†æé¡µé¢ä¼˜åŒ–ä¿®å¤

**1. èŠ‚ç‚¹å¥åº·åº¦æ’è¡Œæ¦œè¡¨æ ¼è‡ªåŠ¨é€‚é…**
- âœ… ä¸ºå¥åº·åº¦æ’è¡Œæ¦œè¡¨æ ¼æ·»åŠ å›ºå®šé«˜åº¦ï¼ˆ600pxï¼‰
- âœ… è¶…è¿‡10æ¡æ•°æ®æ—¶è‡ªåŠ¨æ˜¾ç¤ºæ»šåŠ¨æ¡
- âœ… è¡¨å¤´å›ºå®šï¼Œæ»šåŠ¨æ—¶ä¿æŒå¯è§
- âœ… æ”¹å–„äº†å¤§æ•°æ®é‡æ—¶çš„ç”¨æˆ·ä½“éªŒ

**2. å¹³å‡æ¢å¤æ—¶é—´æ˜¾ç¤ºä¼˜åŒ–**
- âœ… MTTRå›¾è¡¨æ·»åŠ å‹å¥½çš„ç©ºçŠ¶æ€æç¤ºï¼š"æš‚æ— å·²æ¢å¤çš„å¼‚å¸¸"
- âœ… æ·»åŠ å­æ ‡é¢˜è¯´æ˜ï¼š"åªæœ‰å¼‚å¸¸æ¢å¤åæ‰èƒ½ç»Ÿè®¡å¹³å‡æ¢å¤æ—¶é—´"
- âœ… è¡¨æ ¼ä¸­æ— æ•°æ®æ—¶æ˜¾ç¤º"-"ï¼Œå¹¶æä¾›å·¥å…·æç¤ºï¼š"è¯¥èŠ‚ç‚¹æš‚æ— å·²æ¢å¤çš„å¼‚å¸¸è®°å½•"
- âœ… é¿å…ç”¨æˆ·è¯¯ä»¥ä¸ºæ˜¯ç³»ç»Ÿé”™è¯¯

**3. æŸ¥çœ‹è¯¦æƒ…åŠŸèƒ½å®ç°**
- âœ… å®ç°èŠ‚ç‚¹å¥åº·è¯¦æƒ…å¯¹è¯æ¡†
- âœ… æ˜¾ç¤ºå®Œæ•´çš„èŠ‚ç‚¹å¥åº·ä¿¡æ¯ï¼š
  - èŠ‚ç‚¹åç§°ã€é›†ç¾¤åç§°
  - å¥åº·åº¦è¯„åˆ†ï¼ˆå¸¦è¿›åº¦æ¡å¯è§†åŒ–ï¼‰
  - å¥åº·ç­‰çº§æ ‡ç­¾ï¼ˆæå¥½/è‰¯å¥½/ä¸€èˆ¬/è¾ƒå·®/æå·®ï¼‰
  - æ€»å¼‚å¸¸æ•°ã€æ´»è·ƒå¼‚å¸¸æ•°
  - å¹³å‡æ¢å¤æ—¶é—´ã€æœ€è¿‘å¼‚å¸¸æ—¶é—´
- âœ… æ·»åŠ ç»Ÿè®¡å¡ç‰‡ï¼šå¥åº·æŒ‡æ•°ã€å¼‚å¸¸ç‡ç™¾åˆ†æ¯”
- âœ… æ ¹æ®å¼‚å¸¸çŠ¶æ€æ˜¾ç¤ºä¸åŒæç¤ºï¼ˆè­¦å‘Š/æˆåŠŸï¼‰
- âœ… æä¾›"æŸ¥çœ‹èŠ‚ç‚¹è¯¦æƒ…"æŒ‰é’®ï¼Œå¯è·³è½¬åˆ°èŠ‚ç‚¹åˆ—è¡¨é¡µé¢
- âœ… æ·»åŠ ç²¾ç¾çš„å¯¹è¯æ¡†æ ·å¼

### ğŸ“„ æ–‡æ¡£æ›´æ–°
- âœ… æ–°å¢ `docs/fix-analytics-issues.md` - è¯¦ç»†çš„é—®é¢˜ä¿®å¤æŠ¥å‘Š

---

## [v2.13.0] - 2025-10-27 (ä¸Šåˆ)

### âœ¨ æ–°åŠŸèƒ½

#### 1. ç»Ÿè®¡åˆ†æåŠŸèƒ½å…¨é¢å‡çº§

**é«˜çº§ç»Ÿè®¡API** (10+ æ–°å¢æ¥å£):

- âœ… **æŒ‰è§’è‰²èšåˆç»Ÿè®¡** - ç»Ÿè®¡ä¸åŒèŠ‚ç‚¹è§’è‰²çš„å¼‚å¸¸åˆ†å¸ƒ
  - `GET /api/v1/anomalies/role-statistics`
- âœ… **æŒ‰é›†ç¾¤èšåˆç»Ÿè®¡** - ç»Ÿè®¡å„é›†ç¾¤çš„å¼‚å¸¸æƒ…å†µ
  - `GET /api/v1/anomalies/cluster-aggregate`
- âœ… **å•èŠ‚ç‚¹å†å²è¶‹åŠ¿** - æŸ¥çœ‹å•ä¸ªèŠ‚ç‚¹çš„å¼‚å¸¸å˜åŒ–è¶‹åŠ¿
  - `GET /api/v1/anomalies/node-trend`
- âœ… **MTTR ç»Ÿè®¡** - è®¡ç®—å¹³å‡æ¢å¤æ—¶é—´ï¼ˆMean Time To Recoveryï¼‰
  - `GET /api/v1/anomalies/mttr`
- âœ… **SLA å¯ç”¨æ€§** - è®¡ç®—èŠ‚ç‚¹/é›†ç¾¤çš„SLAå¯ç”¨æ€§ç™¾åˆ†æ¯”
  - `GET /api/v1/anomalies/sla`
- âœ… **æ¢å¤ç‡å’Œå¤å‘ç‡** - ç»Ÿè®¡å¼‚å¸¸æ¢å¤ç‡å’Œå¤å‘ç‡
  - `GET /api/v1/anomalies/recovery-metrics`
- âœ… **èŠ‚ç‚¹å¥åº·åº¦è¯„åˆ†** - ç»¼åˆè¯„ä¼°èŠ‚ç‚¹å¥åº·çŠ¶å†µï¼ˆ0-100åˆ†ï¼‰
  - `GET /api/v1/anomalies/node-health`
- âœ… **çƒ­åŠ›å›¾æ•°æ®** - æ—¶é—´ Ã— èŠ‚ç‚¹çŸ©é˜µçš„å¼‚å¸¸åˆ†å¸ƒ
  - `GET /api/v1/anomalies/heatmap`
- âœ… **æ—¥å†å›¾æ•°æ®** - æŒ‰æ—¥æœŸèšåˆçš„å¼‚å¸¸æ•°é‡
  - `GET /api/v1/anomalies/calendar`
- âœ… **Top ä¸å¥åº·èŠ‚ç‚¹** - å¥åº·åº¦æœ€ä½çš„èŠ‚ç‚¹åˆ—è¡¨
  - `GET /api/v1/anomalies/top-unhealthy-nodes`

**å…³é”®æŒ‡æ ‡è®¡ç®—**:

- **MTTR**: `AVG(duration) WHERE status='Resolved'`
- **SLA**: `(æ€»æ—¶é—´ - å¼‚å¸¸ç´¯è®¡æ—¶é•¿) / æ€»æ—¶é—´ Ã— 100%`
- **æ¢å¤ç‡**: `å·²æ¢å¤æ•° / æ€»å¼‚å¸¸æ•° Ã— 100%`
- **å¤å‘ç‡**: `é‡å¤å¼‚å¸¸æ¬¡æ•° / æ€»æ¢å¤æ¬¡æ•° Ã— 100%`
- **å¥åº·åº¦è¯„åˆ†**: ç»¼åˆå¼‚å¸¸æ¬¡æ•°ã€ç±»å‹ã€æŒç»­æ—¶é•¿ã€æ¢å¤é€Ÿåº¦ç­‰æŒ‡æ ‡

#### 2. å®šæ—¶æŠ¥å‘Šé…ç½®ç®¡ç†ï¼ˆæ•°æ®åº“é©±åŠ¨ï¼‰

**æ ¸å¿ƒç‰¹æ€§**:

- âœ… **UI ç•Œé¢ç®¡ç†** - é€šè¿‡"ç³»ç»Ÿé…ç½® â†’ åˆ†ææŠ¥å‘Š"é¡µé¢ç®¡ç†æŠ¥å‘Šé…ç½®
- âœ… **æ•°æ®åº“å­˜å‚¨** - é…ç½®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œæ— éœ€ä¿®æ”¹é…ç½®æ–‡ä»¶
- âœ… **Cron è°ƒåº¦** - ä½¿ç”¨ Cron è¡¨è¾¾å¼çµæ´»é…ç½®æ‰§è¡Œæ—¶é—´
- âœ… **é£ä¹¦è‡ªåŠ¨æ¨é€** - å®šæ—¶ç”ŸæˆæŠ¥å‘Šå¹¶æ¨é€åˆ°é£ä¹¦ç¾¤èŠ
- âœ… **å¤šæŠ¥å‘Šæ”¯æŒ** - å¯åˆ›å»ºå¤šä¸ªæŠ¥å‘Šé…ç½®ï¼ˆæ—¥æŠ¥ã€å‘¨æŠ¥ã€æœˆæŠ¥ç­‰ï¼‰
- âœ… **æµ‹è¯•å‘é€** - é…ç½®å‰å¯æµ‹è¯•æ¨é€æ¸ é“
- âœ… **æ‰‹åŠ¨æ‰§è¡Œ** - æ”¯æŒæ‰‹åŠ¨è§¦å‘æŠ¥å‘Šç”Ÿæˆ

**æŠ¥å‘Šå†…å®¹**:

- æ—¶é—´èŒƒå›´å†…çš„ç»Ÿè®¡æ‘˜è¦ï¼ˆæ€»å¼‚å¸¸ã€æ´»è·ƒã€å·²æ¢å¤ã€å—å½±å“èŠ‚ç‚¹ï¼‰
- å¼‚å¸¸è¶‹åŠ¿æ•°æ®
- å¼‚å¸¸ç±»å‹åˆ†å¸ƒ
- Top 10 å¼‚å¸¸èŠ‚ç‚¹
- MTTR å’Œ SLA å…³é”®æŒ‡æ ‡
- å¥åº·åº¦æœ€ä½çš„èŠ‚ç‚¹åˆ—è¡¨

**API æ¥å£** (7ä¸ªæ–°å¢æ¥å£):

```
GET    /api/v1/anomaly-reports/configs         # è·å–æŠ¥å‘Šé…ç½®åˆ—è¡¨
GET    /api/v1/anomaly-reports/configs/:id     # è·å–å•ä¸ªé…ç½®
POST   /api/v1/anomaly-reports/configs         # åˆ›å»ºé…ç½®
PUT    /api/v1/anomaly-reports/configs/:id     # æ›´æ–°é…ç½®
DELETE /api/v1/anomaly-reports/configs/:id     # åˆ é™¤é…ç½®
POST   /api/v1/anomaly-reports/configs/:id/test # æµ‹è¯•å‘é€
POST   /api/v1/anomaly-reports/configs/:id/run  # æ‰‹åŠ¨æ‰§è¡Œ
```

#### 3. èŠ‚ç‚¹å¥åº·åº¦è¯„åˆ†ç³»ç»Ÿ

**è¯„åˆ†ä½“ç³»**:

| åˆ†æ•°èŒƒå›´ | ç­‰çº§ | è¯´æ˜ |
|---------|------|------|
| 90-100 | ä¼˜ç§€ | èŠ‚ç‚¹è¿è¡Œç¨³å®šï¼Œæå°‘å‡ºç°å¼‚å¸¸ |
| 75-89 | è‰¯å¥½ | å¶å°”å‡ºç°å¼‚å¸¸ï¼Œä½†æ¢å¤è¿…é€Ÿ |
| 60-74 | ä¸€èˆ¬ | å­˜åœ¨ä¸€å®šæ•°é‡çš„å¼‚å¸¸ï¼Œéœ€å…³æ³¨ |
| 40-59 | è¾ƒå·® | å¼‚å¸¸é¢‘ç¹æˆ–æ¢å¤ç¼“æ…¢ï¼Œå»ºè®®æ£€æŸ¥ |
| 0-39 | å¾ˆå·® | ä¸¥é‡é—®é¢˜ï¼Œéœ€è¦ç«‹å³å¤„ç† |

**å½±å“å› ç´ **:

- å¼‚å¸¸é¢‘ç‡ï¼ˆæƒé‡ 30%ï¼‰
- æ¢å¤é€Ÿåº¦ï¼ˆæƒé‡ 30%ï¼‰
- å¼‚å¸¸ä¸¥é‡æ€§ï¼ˆæƒé‡ 20%ï¼‰
- ç¨³å®šæ€§/å¤å‘ç‡ï¼ˆæƒé‡ 20%ï¼‰

**å‰ç«¯ç»„ä»¶**:

- `NodeHealthCard.vue` - èŠ‚ç‚¹å¥åº·åº¦è¯„åˆ†å¡
- æ˜¾ç¤ºå¥åº·åº¦è¯„åˆ†ã€ç­‰çº§ã€å½±å“å› ç´ åˆ†è§£
- æ”¯æŒè¿‘7å¤©å¥åº·åº¦è¶‹åŠ¿å›¾

#### 4. æ–°å¢å‰ç«¯ API æ–¹æ³•

**æ–‡ä»¶**: `frontend/src/api/anomaly.js`

æ–°å¢ 17 ä¸ª API æ–¹æ³•ï¼š

- é«˜çº§ç»Ÿè®¡ç›¸å…³ï¼ˆ10ä¸ªï¼‰
- æŠ¥å‘Šé…ç½®ç®¡ç†ï¼ˆ7ä¸ªï¼‰

#### 5. æ–°å¢ç³»ç»Ÿé…ç½®é¡µé¢

**å¯¼èˆªè·¯å¾„**: ç³»ç»Ÿé…ç½® â†’ åˆ†ææŠ¥å‘Š

**åŠŸèƒ½**:

- æŠ¥å‘Šé…ç½®åˆ—è¡¨ï¼ˆè¡¨æ ¼å±•ç¤ºï¼‰
- å¯ç”¨/ç¦ç”¨ã€ç¼–è¾‘ã€åˆ é™¤ã€æµ‹è¯•ã€æ‰‹åŠ¨æ‰§è¡Œ
- æ–°å¢/ç¼–è¾‘æŠ¥å‘Šé…ç½®å¯¹è¯æ¡†
- Cron è¡¨è¾¾å¼éªŒè¯å’Œè¯´æ˜

### ğŸ”§ é…ç½®å˜æ›´

#### åç«¯é…ç½®

**æ–‡ä»¶**: `backend/configs/config.yaml.example`

æ–°å¢é…ç½®é¡¹ï¼š

```yaml
monitoring:
  enabled: true
  interval: 60
  report_scheduler_enabled: true  # æ–°å¢ï¼šå¯ç”¨æŠ¥å‘Šè°ƒåº¦å™¨
```

#### æ•°æ®åº“è¿ç§»

**æ–°å¢è¡¨**: `anomaly_report_configs`

```sql
CREATE TABLE anomaly_report_configs (
    id                SERIAL PRIMARY KEY,
    enabled           BOOLEAN DEFAULT FALSE,
    report_name       VARCHAR(100) NOT NULL,
    schedule          VARCHAR(50),
    frequency         VARCHAR(20),
    cluster_ids       TEXT,
    feishu_enabled    BOOLEAN DEFAULT FALSE,
    feishu_webhook    VARCHAR(500),
    email_enabled     BOOLEAN DEFAULT FALSE,
    email_recipients  TEXT,
    last_run_time     TIMESTAMP,
    next_run_time     TIMESTAMP,
    created_at        TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at        TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### å‰ç«¯è·¯ç”±

æ–°å¢è·¯ç”±ï¼š

- `/analytics-report-settings` - åˆ†ææŠ¥å‘Šé…ç½®é¡µé¢

### ğŸ“¦ æ–°å¢ä¾èµ–

#### åç«¯

- `github.com/robfig/cron/v3 v3.0.1` - Cron ä»»åŠ¡è°ƒåº¦

### ğŸ“ æ–°å¢/ä¿®æ”¹æ–‡ä»¶

#### åç«¯æ–°å¢

1. `backend/internal/service/anomaly/statistics_extended.go` - æ‰©å±•ç»Ÿè®¡æ–¹æ³•
2. `backend/internal/service/anomaly/statistics_visualization.go` - å¯è§†åŒ–æ•°æ®æ–¹æ³•
3. `backend/internal/service/anomaly/report.go` - æŠ¥å‘Šç”Ÿæˆå’Œé…ç½®ç®¡ç†
4. `backend/internal/handler/anomaly/statistics_handler.go` - ç»Ÿè®¡æ¥å£å¤„ç†å™¨
5. `backend/internal/handler/anomaly/report_handler.go` - æŠ¥å‘Šé…ç½®å¤„ç†å™¨
6. `backend/migrations/002_add_anomaly_analytics.sql` - æ•°æ®åº“è¿ç§»

#### åç«¯ä¿®æ”¹

1. `backend/internal/model/anomaly.go` - æ–°å¢æ•°æ®ç»“æ„å’ŒæŠ¥å‘Šé…ç½®è¡¨
2. `backend/internal/model/migrate.go` - æ³¨å†Œæ–°è¡¨è¿ç§»
3. `backend/internal/service/anomaly/anomaly.go` - æ–°å¢ç»Ÿè®¡æ–¹æ³•
4. `backend/internal/service/services.go` - æ³¨å†Œ AnomalyReport æœåŠ¡
5. `backend/internal/handler/handlers.go` - æ³¨å†Œ AnomalyReport handler
6. `backend/internal/config/config.go` - æ–°å¢é…ç½®å®šä¹‰
7. `backend/configs/config.yaml.example` - æ–°å¢é…ç½®ç¤ºä¾‹
8. `backend/cmd/main.go` - å¯åŠ¨/åœæ­¢æŠ¥å‘Šè°ƒåº¦å™¨

#### å‰ç«¯æ–°å¢

1. `frontend/src/views/analytics/ReportSettings.vue` - æŠ¥å‘Šé…ç½®ç®¡ç†é¡µé¢
2. `frontend/src/components/analytics/NodeHealthCard.vue` - èŠ‚ç‚¹å¥åº·åº¦è¯„åˆ†å¡

#### å‰ç«¯ä¿®æ”¹

1. `frontend/src/api/anomaly.js` - æ–°å¢ 17 ä¸ª API æ–¹æ³•
2. `frontend/src/router/index.js` - æ–°å¢è·¯ç”±
3. `frontend/src/components/layout/Sidebar.vue` - æ–°å¢èœå•é¡¹

#### æ–‡æ¡£æ–°å¢

1. `docs/analytics-advanced-features.md` - é«˜çº§åŠŸèƒ½æ–‡æ¡£
2. `docs/CHANGELOG.md` - æ›´æ–°å˜æ›´æ—¥å¿—ï¼ˆæœ¬æ–‡ä»¶ï¼‰

### ğŸ¯ åŠŸèƒ½äº®ç‚¹

1. **æ•°æ®åº“é©±åŠ¨é…ç½®** - æŠ¥å‘Šé…ç½®é€šè¿‡ UI ç®¡ç†ï¼Œæ— éœ€ä¿®æ”¹é…ç½®æ–‡ä»¶
2. **çµæ´»çš„è°ƒåº¦æœºåˆ¶** - æ”¯æŒ Cron è¡¨è¾¾å¼ï¼Œå¯é…ç½®æ—¥/å‘¨/æœˆæŠ¥å‘Š
3. **å…¨é¢çš„ç»Ÿè®¡åˆ†æ** - è¦†ç›–è§’è‰²ã€é›†ç¾¤ã€èŠ‚ç‚¹å¤šç»´åº¦åˆ†æ
4. **å¥åº·åº¦è¯„åˆ†ç³»ç»Ÿ** - ç»¼åˆå¤šæŒ‡æ ‡è¯„ä¼°èŠ‚ç‚¹å¥åº·çŠ¶å†µ
5. **å¯æ‰©å±•çš„æŠ¥å‘Šç³»ç»Ÿ** - æ”¯æŒé£ä¹¦ã€é‚®ä»¶ç­‰å¤šæ¸ é“æ¨é€ï¼ˆé‚®ä»¶é¢„ç•™ï¼‰

### ğŸ“Š æ€§èƒ½ä¼˜åŒ–

1. **æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–** - ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
2. **ç¼“å­˜ç­–ç•¥** - ä½¿ç”¨ PostgreSQL ç¼“å­˜è¡¨æˆ–å†…å­˜ç¼“å­˜
3. **å¼‚æ­¥å¤„ç†** - æŠ¥å‘Šç”Ÿæˆä½¿ç”¨åå°ä»»åŠ¡

### ğŸ“š æ–‡æ¡£æ›´æ–°

- âœ… æ–°å¢ã€Šç»Ÿè®¡åˆ†æé«˜çº§åŠŸèƒ½æ–‡æ¡£ã€‹
- âœ… Cron è¡¨è¾¾å¼è¯´æ˜å’Œç¤ºä¾‹
- âœ… API æ¥å£è¯¦ç»†è¯´æ˜
- âœ… ä½¿ç”¨æŒ‡å—å’Œå¸¸è§é—®é¢˜

### âš ï¸ æ³¨æ„äº‹é¡¹

1. å‡çº§åéœ€è¦æ‰§è¡Œæ•°æ®åº“è¿ç§»ï¼ˆGORM è‡ªåŠ¨è¿ç§»ï¼‰
2. å¦‚éœ€å¯ç”¨æŠ¥å‘Šè°ƒåº¦å™¨ï¼Œè¯·ç¡®ä¿é…ç½® `monitoring.report_scheduler_enabled: true`
3. é£ä¹¦æ¨é€éœ€è¦åœ¨ç¾¤èŠä¸­æ·»åŠ è‡ªå®šä¹‰æœºå™¨äººå¹¶é…ç½® Webhook URL
4. é‚®ä»¶æ¨é€åŠŸèƒ½é¢„ç•™ï¼Œå°†åœ¨ä¸‹ä¸€ç‰ˆæœ¬å®ç°

---

## [v2.12.8] - 2025-10-27

### ğŸ› Bug ä¿®å¤

#### 1. WebSocket é¢‘ç¹é‡è¿é—®é¢˜ä¿®å¤

**é—®é¢˜æè¿°**ï¼š
- æ‰¹é‡æ“ä½œå®Œæˆå WebSocket è¿æ¥é¢‘ç¹æ–­å¼€é‡è¿ï¼ˆæ¯ç§’ä¸€æ¬¡ï¼‰
- äº§ç”Ÿå¤§é‡æ—¥å¿—ï¼Œå½±å“ç³»ç»Ÿå¯è¯»æ€§å’Œæ€§èƒ½
- æ ¹æœ¬åŸå› ï¼šå‰ç«¯åœ¨å®Œæˆåä»åœ¨ç­‰å¾… `complete` æ¶ˆæ¯ï¼Œå½¢æˆé‡è¿å¾ªç¯

**ä¿®å¤å†…å®¹**ï¼š

**å‰ç«¯ä¼˜åŒ–** (`frontend/src/components/common/ProgressDialog.vue`):
- âœ… æ·»åŠ é‡è¿é™åˆ¶ï¼šæœ€å¤šé‡è¿ 5 æ¬¡ï¼Œé˜²æ­¢æ— é™å¾ªç¯
- âœ… é€’å¢å»¶è¿Ÿç­–ç•¥ï¼š1ç§’ â†’ 2ç§’ â†’ 3ç§’ï¼Œå‡å°‘æœåŠ¡å™¨å‹åŠ›
- âœ… å®Œæˆæ—¶ç«‹å³å…³é—­ï¼šæ”¶åˆ° `complete` æ¶ˆæ¯åç«‹å³å…³é—­ WebSocket
- âœ… æ™ºèƒ½é‡è¿åˆ¤æ–­ï¼šä»»åŠ¡å®Œæˆæˆ–å‡ºé”™åä¸å†é‡è¿
- âœ… çŠ¶æ€åŒæ­¥ï¼šè¿æ¥æˆåŠŸåé‡ç½®é‡è¿è®¡æ•°å™¨

**åç«¯ä¼˜åŒ–** (`backend/internal/service/progress/progress.go`):
- âœ… å‡å°‘æ—¥å¿—è¾“å‡ºï¼šç§»é™¤éå¿…è¦çš„è¿æ¥/æ–­å¼€æ—¥å¿—
- âœ… é™é»˜å…³é—­è¿æ¥ï¼šæ­£å¸¸å…³é—­ä¸è®°å½•æ—¥å¿—
- âœ… åªè®°å½•å¼‚å¸¸ï¼šä»…åœ¨çœŸæ­£çš„å¼‚å¸¸æƒ…å†µä¸‹è®°å½•é”™è¯¯æ—¥å¿—

**ä¿®å¤æ•ˆæœ**ï¼š
- æ­£å¸¸æ“ä½œä¸äº§ç”Ÿæ—¥å¿—ï¼Œåªåœ¨å¼‚å¸¸æ—¶è®°å½•
- æœ€å¤šé‡è¿ 5 æ¬¡ï¼Œé¿å…æ— é™å¾ªç¯
- ä»»åŠ¡å®Œæˆåç«‹å³å…³é—­è¿æ¥ï¼Œä¸å†é‡è¿

**ç›¸å…³æ–‡æ¡£**ï¼š
- `docs/websocket-reconnect-optimization.md`

---

#### 2. æ ‡ç­¾/æ±¡ç‚¹åº”ç”¨åä¸åˆ·æ–°é—®é¢˜ä¿®å¤

**é—®é¢˜æè¿°**ï¼š
- æ ‡ç­¾æˆ–æ±¡ç‚¹åº”ç”¨åˆ°èŠ‚ç‚¹åï¼Œç•Œé¢æ²¡æœ‰è‡ªåŠ¨åˆ·æ–°
- ç”¨æˆ·çœ‹ä¸åˆ°æœ€æ–°çš„æ ‡ç­¾/æ±¡ç‚¹ä¿¡æ¯
- éœ€è¦æ‰‹åŠ¨åˆ·æ–°é¡µé¢æ‰èƒ½çœ‹åˆ°æ›´æ–°

**æ ¹æœ¬åŸå› **ï¼š
- â‰¤5 ä¸ªèŠ‚ç‚¹çš„åŒæ­¥æ“ä½œï¼šå®Œæˆåæ²¡æœ‰è°ƒç”¨åˆ·æ–°å‡½æ•°
- \>5 ä¸ªèŠ‚ç‚¹çš„æ‰¹é‡æ“ä½œï¼šåªåˆ·æ–°æ¨¡æ¿åˆ—è¡¨ï¼Œæœªåˆ·æ–°èŠ‚ç‚¹æ•°æ®

**ä¿®å¤å†…å®¹**ï¼š

**æ ‡ç­¾ç®¡ç†é¡µé¢** (`frontend/src/views/labels/LabelManage.vue`):
- âœ… åŒæ­¥æ“ä½œï¼ˆâ‰¤5 ä¸ªèŠ‚ç‚¹ï¼‰ï¼šåº”ç”¨æˆåŠŸåæ·»åŠ  `refreshData(true)`
- âœ… æ‰¹é‡æ“ä½œï¼ˆ>5 ä¸ªèŠ‚ç‚¹ï¼‰ï¼šè¿›åº¦å®Œæˆåæ”¹ä¸º `refreshData(true)`

**æ±¡ç‚¹ç®¡ç†é¡µé¢** (`frontend/src/views/taints/TaintManage.vue`):
- âœ… åŒæ­¥æ“ä½œï¼ˆâ‰¤5 ä¸ªèŠ‚ç‚¹ï¼‰ï¼šåº”ç”¨æˆåŠŸåæ·»åŠ  `refreshData(true)`
- âœ… æ‰¹é‡æ“ä½œï¼ˆ>5 ä¸ªèŠ‚ç‚¹ï¼‰ï¼šè¿›åº¦å®Œæˆåæ”¹ä¸º `refreshData(true)`

**ä¿®å¤æ•ˆæœ**ï¼š
- åº”ç”¨æ ‡ç­¾/æ±¡ç‚¹åè‡ªåŠ¨åˆ·æ–°èŠ‚ç‚¹æ•°æ®
- ç•Œé¢ç«‹å³æ˜¾ç¤ºæœ€æ–°çš„æ ‡ç­¾/æ±¡ç‚¹ä¿¡æ¯
- æä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒ

**å½±å“æ–‡ä»¶**ï¼š
- `frontend/src/views/labels/LabelManage.vue`
- `frontend/src/views/taints/TaintManage.vue`

---

### ğŸ“ æ–‡ä»¶å˜æ›´æ¸…å•

#### å‰ç«¯ä¿®æ”¹
1. `frontend/src/components/common/ProgressDialog.vue` - WebSocket é‡è¿ä¼˜åŒ–
2. `frontend/src/views/labels/LabelManage.vue` - æ·»åŠ åˆ·æ–°é€»è¾‘
3. `frontend/src/views/taints/TaintManage.vue` - æ·»åŠ åˆ·æ–°é€»è¾‘

#### åç«¯ä¿®æ”¹
1. `backend/internal/service/progress/progress.go` - ä¼˜åŒ–æ—¥å¿—è¾“å‡º

#### æ–°å¢æ–‡æ¡£
1. `docs/websocket-reconnect-optimization.md` - WebSocket é‡è¿ä¼˜åŒ–æ–‡æ¡£

---

## [v2.11.0] - 2025-10-22

### ğŸ”§ Bug ä¿®å¤

#### ç»Ÿè®¡åˆ†ææ•°æ®ç±»å‹é”™è¯¯ä¿®å¤

**é—®é¢˜æè¿°**ï¼š
ç»Ÿè®¡æ¥å£è¿”å› 500 é”™è¯¯ï¼š
```
sql: Scan error on column index 4, name "average_duration": 
converting driver.Value type string ("1669.6000000000000000") to a int64: invalid syntax
```

**ä¿®å¤å†…å®¹**ï¼š
- âœ… ä¿®å¤ `AnomalyStatistics.AverageDuration` ç±»å‹ï¼š`int64` â†’ `float64`
- âœ… ä¿®å¤ `AnomalyTypeStatistics` å­—æ®µå‘½åä¸€è‡´æ€§
- âœ… æ›´æ–°ç›¸å…³ SQL æŸ¥è¯¢å’Œæ’åºé€»è¾‘

**å½±å“æ–‡ä»¶**ï¼š
- `backend/internal/model/anomaly.go`
- `backend/internal/service/anomaly/anomaly.go`

---

### â™»ï¸ é‡æ„ä¼˜åŒ–

#### 1. ç»Ÿè®¡åˆ†æé¡µé¢é‡æ„

**ä¼˜åŒ–å†…å®¹**ï¼š
- âœ… å°†ç»Ÿè®¡åˆ†æé¡µé¢é‡æ„ä¸º Tab åˆ†æ ç»“æ„
  - **æ•°æ®æ¦‚è§ˆ**ï¼šç»Ÿè®¡å¡ç‰‡å±•ç¤º
  - **è¶‹åŠ¿åˆ†æ**ï¼šECharts å›¾è¡¨å±•ç¤º
  - **å¼‚å¸¸è®°å½•**ï¼šå¼‚å¸¸åˆ—è¡¨å’Œè¯¦æƒ…
- âœ… åˆ é™¤å¯¹æ¯”åˆ†æåŠŸèƒ½ï¼ˆç®€åŒ–ç”¨æˆ·ç•Œé¢ï¼‰

**æ”¹è¿›æ•ˆæœ**ï¼š
- æ›´æ¸…æ™°çš„ä¿¡æ¯å±‚æ¬¡
- æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ
- æ›´å¿«çš„é¡µé¢åŠ è½½é€Ÿåº¦

**å˜æ›´æ–‡ä»¶**ï¼š
- `frontend/src/views/analytics/Analytics.vue` - å®Œå…¨é‡æ„
- `frontend/src/components/analytics/CompareAnalysis.vue` - å·²åˆ é™¤

---

#### 2. å›¾è¡¨æ•°æ®ä¿®å¤

**ä¿®å¤é—®é¢˜**ï¼š
- âœ… ä¿®å¤èŠ‚ç‚¹å¼‚å¸¸ Top 10 æ•°æ®æ˜¾ç¤ºé—®é¢˜
- âœ… ä¿®å¤å¼‚å¸¸ç±»å‹åˆ†å¸ƒæ•°æ®æ˜ å°„
- âœ… ä¼˜åŒ–å›¾è¡¨æ•°æ®èšåˆé€»è¾‘

**æŠ€æœ¯å®ç°**ï¼š
- ä» `anomalies` prop ç›´æ¥èšåˆèŠ‚ç‚¹ç»Ÿè®¡
- æ·»åŠ ç©ºæ•°æ®å¤„ç†é€»è¾‘
- ä¼˜åŒ–å›¾è¡¨æ¸²æŸ“æ€§èƒ½

**å˜æ›´æ–‡ä»¶**ï¼š
- `frontend/src/components/analytics/TrendCharts.vue`

---

#### 3. å¼‚å¸¸è¯¦æƒ…é¡µé¢ç®€åŒ–

**ä¼˜åŒ–å†…å®¹**ï¼š
- âœ… åˆ é™¤å¤„ç†å»ºè®®æ¨¡å—ï¼ˆå‡å°‘å†—ä½™ä¿¡æ¯ï¼‰
- âœ… ä¿ç•™æ ¸å¿ƒä¿¡æ¯ï¼šåŸºæœ¬ä¿¡æ¯ã€æ—¶é—´çº¿ã€èŠ‚ç‚¹å¿«ç…§ã€å†å²è®°å½•

**ä¼˜åŒ–ç†ç”±**ï¼š
- å¤„ç†å»ºè®®å¤šä¸ºé€šç”¨å†…å®¹ï¼Œå®é™…å‚è€ƒä»·å€¼æœ‰é™
- ç®€åŒ–é¡µé¢ç»“æ„ï¼Œæå‡åŠ è½½é€Ÿåº¦
- èšç„¦äºæ•°æ®å±•ç¤ºè€ŒéæŒ‡å¯¼æ€§å†…å®¹

**å˜æ›´æ–‡ä»¶**ï¼š
- `frontend/src/views/analytics/AnomalyDetail.vue`

---

### ğŸ“Š åŠŸèƒ½å¯¹æ¯”

#### ä¿®æ”¹å‰ vs ä¿®æ”¹å

| åŠŸèƒ½æ¨¡å— | ä¿®æ”¹å‰ | ä¿®æ”¹å | è¯´æ˜ |
|---------|-------|-------|------|
| ç»Ÿè®¡åˆ†æå¸ƒå±€ | å•é¡µé¢æ··åˆ | Tab åˆ†æ ç»“æ„ | âœ… æ›´æ¸…æ™° |
| å¯¹æ¯”åˆ†æ | âœ“ å­˜åœ¨ | âœ— å·²åˆ é™¤ | ç®€åŒ–åŠŸèƒ½ |
| å¼‚å¸¸è¯¦æƒ…å¤„ç†å»ºè®® | âœ“ å­˜åœ¨ | âœ— å·²åˆ é™¤ | èšç„¦æ ¸å¿ƒæ•°æ® |
| èŠ‚ç‚¹å¼‚å¸¸ Top 10 | âœ— æ•°æ®é”™è¯¯ | âœ… æ­£å¸¸æ˜¾ç¤º | å·²ä¿®å¤ |
| å¼‚å¸¸ç±»å‹åˆ†å¸ƒ | âœ— æ•°æ®é”™è¯¯ | âœ… æ­£å¸¸æ˜¾ç¤º | å·²ä¿®å¤ |
| å¹³å‡æŒç»­æ—¶é—´ | âœ— ç±»å‹é”™è¯¯ | âœ… æ­£å¸¸æ˜¾ç¤º | å·²ä¿®å¤ |

---

### ğŸ—‚ï¸ æ–‡ä»¶å˜æ›´æ¸…å•

#### åç«¯ä¿®æ”¹
1. `backend/internal/model/anomaly.go` - ä¿®å¤æ•°æ®ç±»å‹
2. `backend/internal/service/anomaly/anomaly.go` - æ›´æ–° SQL æŸ¥è¯¢

#### å‰ç«¯ä¿®æ”¹
1. `frontend/src/views/analytics/Analytics.vue` - å®Œå…¨é‡æ„ï¼ˆTab åˆ†æ ï¼‰
2. `frontend/src/components/analytics/TrendCharts.vue` - ä¿®å¤å›¾è¡¨æ•°æ®é€»è¾‘
3. `frontend/src/views/analytics/AnomalyDetail.vue` - åˆ é™¤å¤„ç†å»ºè®®æ¨¡å—

#### åˆ é™¤æ–‡ä»¶
1. `frontend/src/components/analytics/CompareAnalysis.vue` - å¯¹æ¯”åˆ†æç»„ä»¶

---

### ğŸ“¸ é¡µé¢ç»“æ„

#### ç»Ÿè®¡åˆ†æé¡µé¢ï¼ˆé‡æ„åï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç­›é€‰å™¨ï¼šé›†ç¾¤ã€æ—¶é—´èŒƒå›´ã€æ‰‹åŠ¨æ£€æµ‹         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tab 1: æ•°æ®æ¦‚è§ˆ                         â”‚
â”‚  â”œâ”€ æ€»å¼‚å¸¸æ•°                             â”‚
â”‚  â”œâ”€ æ´»è·ƒå¼‚å¸¸                             â”‚
â”‚  â”œâ”€ å·²æ¢å¤å¼‚å¸¸                           â”‚
â”‚  â””â”€ å—å½±å“èŠ‚ç‚¹                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Tab 2: è¶‹åŠ¿åˆ†æ                         â”‚
â”‚  â”œâ”€ å¼‚å¸¸è¶‹åŠ¿æŠ˜çº¿å›¾                        â”‚
â”‚  â”œâ”€ å¼‚å¸¸ç±»å‹åˆ†å¸ƒé¥¼å›¾                      â”‚
â”‚  â”œâ”€ èŠ‚ç‚¹å¼‚å¸¸Top 10                       â”‚
â”‚  â””â”€ é›†ç¾¤å¯¹æ¯”æŸ±çŠ¶å›¾                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Tab 3: å¼‚å¸¸è®°å½•                         â”‚
â”‚  â”œâ”€ è¿‡æ»¤å™¨ï¼ˆå¼‚å¸¸ç±»å‹ï¼‰                    â”‚
â”‚  â”œâ”€ å¼‚å¸¸åˆ—è¡¨è¡¨æ ¼                         â”‚
â”‚  â””â”€ åˆ†é¡µ                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å¼‚å¸¸è¯¦æƒ…é¡µé¢ï¼ˆç²¾ç®€åï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¿”å›æŒ‰é’®    å¼‚å¸¸è¯¦æƒ…                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åŸºæœ¬ä¿¡æ¯                                â”‚
â”‚  â”œâ”€ é›†ç¾¤ã€èŠ‚ç‚¹ã€ç±»å‹                      â”‚
â”‚  â”œâ”€ æŒç»­æ—¶é—´ã€å¼€å§‹/ç»“æŸæ—¶é—´               â”‚
â”‚  â””â”€ åŸå› ã€è¯¦ç»†æ¶ˆæ¯                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  äº‹ä»¶æ—¶é—´çº¿                              â”‚
â”‚  â”œâ”€ å¼‚å¸¸å¼€å§‹                             â”‚
â”‚  â”œâ”€ çŠ¶æ€å˜æ›´                             â”‚
â”‚  â””â”€ å¼‚å¸¸æ¢å¤                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  èŠ‚ç‚¹çŠ¶æ€å¿«ç…§                            â”‚
â”‚  â”œâ”€ è§’è‰²ã€ç‰ˆæœ¬ã€ç³»ç»Ÿ                      â”‚
â”‚  â””â”€ CPUã€å†…å­˜ã€ç£ç›˜ã€Podä½¿ç”¨ç‡            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å†å²å¼‚å¸¸è®°å½•                            â”‚
â”‚  â””â”€ è¯¥èŠ‚ç‚¹æœ€è¿‘30å¤©å¼‚å¸¸åˆ—è¡¨                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### âœ… æµ‹è¯•éªŒè¯

#### API æµ‹è¯•

| æ¥å£ | æµ‹è¯•ç»“æœ |
|------|---------|
| `GET /api/v1/anomalies/statistics` | âœ… 200 OK |
| `GET /api/v1/anomalies/type-statistics` | âœ… 200 OK |
| `GET /api/v1/anomalies/active` | âœ… 200 OK |
| `GET /api/v1/anomalies` | âœ… 200 OK |

#### å‰ç«¯é¡µé¢æµ‹è¯•

| é¡µé¢åŠŸèƒ½ | æµ‹è¯•ç»“æœ |
|---------|---------|
| ç»Ÿè®¡åˆ†æ - æ•°æ®æ¦‚è§ˆ Tab | âœ… æ­£å¸¸æ˜¾ç¤º |
| ç»Ÿè®¡åˆ†æ - è¶‹åŠ¿åˆ†æ Tab | âœ… å›¾è¡¨æ­£å¸¸ |
| ç»Ÿè®¡åˆ†æ - å¼‚å¸¸è®°å½• Tab | âœ… åˆ—è¡¨æ­£å¸¸ |
| èŠ‚ç‚¹å¼‚å¸¸ Top 10 | âœ… æ•°æ®æ­£ç¡® |
| å¼‚å¸¸ç±»å‹åˆ†å¸ƒ | âœ… æ•°æ®æ­£ç¡® |
| å¼‚å¸¸è¯¦æƒ…é¡µé¢ | âœ… ä¿¡æ¯å®Œæ•´ |
| Tab åˆ‡æ¢ | âœ… æµç•…æ— å¡é¡¿ |

---

### ğŸš€ éƒ¨ç½²è¯´æ˜

#### 1. æ•°æ®åº“å…¼å®¹æ€§

**æ— éœ€æ•°æ®åº“è¿ç§»** âœ…
- åªä¿®æ”¹ Go ä»£ç ç±»å‹å®šä¹‰
- æ•°æ®åº“è¡¨ç»“æ„ä¸å˜
- ç°æœ‰æ•°æ®å®Œå…¨å…¼å®¹

#### 2. ç¼“å­˜å¤„ç†

**è‡ªåŠ¨è¿‡æœŸï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ** âœ…
- æ—§ç¼“å­˜ä¼šåœ¨ TTL è¿‡æœŸåè‡ªåŠ¨å¤±æ•ˆ
- å»ºè®® TTL: 5 åˆ†é’Ÿï¼ˆé»˜è®¤é…ç½®ï¼‰

#### 3. éƒ¨ç½²æ­¥éª¤

```bash
# 1. æ„å»ºé•œåƒ
make docker-build

# 2. æ¨é€é•œåƒ
docker push your-registry/kube-node-manager:v2.11.0

# 3. æ›´æ–° Kubernetes éƒ¨ç½²
kubectl set image deployment/kube-node-manager \
  kube-node-manager=your-registry/kube-node-manager:v2.11.0

# 4. ç›‘æ§æ»šåŠ¨æ›´æ–°
kubectl rollout status deployment/kube-node-manager

# 5. éªŒè¯
kubectl logs -f deployment/kube-node-manager --tail=50
```

#### 4. å›æ»šæ–¹æ¡ˆ

å¦‚éœ€å›æ»šï¼š
```bash
kubectl rollout undo deployment/kube-node-manager
```

---

### ğŸ“ æ³¨æ„äº‹é¡¹

#### å‰ç«¯å…¼å®¹æ€§

âœ… **æ— å½±å“**
- JavaScript è‡ªåŠ¨å¤„ç† float/int è½¬æ¢
- API å“åº”æ ¼å¼ä¿æŒä¸å˜
- ç°æœ‰å®¢æˆ·ç«¯æ— éœ€å‡çº§

#### æ€§èƒ½å½±å“

âœ… **æ€§èƒ½æå‡**
- Tab åˆ†æ å‡å°‘åˆå§‹æ¸²æŸ“å†…å®¹
- æŒ‰éœ€åŠ è½½å›¾è¡¨æ•°æ®
- åˆ é™¤å†—ä½™ç»„ä»¶é™ä½æ‰“åŒ…ä½“ç§¯

#### ç”¨æˆ·ä½“éªŒ

âœ… **ä½“éªŒä¼˜åŒ–**
- æ›´æ¸…æ™°çš„ä¿¡æ¯æ¶æ„
- æ›´å¿«çš„é¡µé¢å“åº”
- æ›´ç›´è§‚çš„æ“ä½œæµç¨‹

---

## ç‰ˆæœ¬è¯´æ˜

### ç‰ˆæœ¬æ ¼å¼

æœ¬é¡¹ç›®éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬ 2.0.0](https://semver.org/lang/zh-CN/) è§„èŒƒï¼š

- **ä¸»ç‰ˆæœ¬å·ï¼ˆMAJORï¼‰**ï¼šä¸å…¼å®¹çš„ API ä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å·ï¼ˆMINORï¼‰**ï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **ä¿®è®¢å·ï¼ˆPATCHï¼‰**ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

### å˜æ›´ç±»å‹

- ğŸ‰ **Added** - æ–°å¢åŠŸèƒ½
- ğŸ”§ **Fixed** - Bug ä¿®å¤
- â™»ï¸ **Changed** - åŠŸèƒ½å˜æ›´
- âš ï¸ **Deprecated** - å³å°†åºŸå¼ƒçš„åŠŸèƒ½
- ğŸ—‘ï¸ **Removed** - å·²åˆ é™¤çš„åŠŸèƒ½
- ğŸ”’ **Security** - å®‰å…¨æ€§ä¿®å¤
- ğŸ“ **Docs** - æ–‡æ¡£æ›´æ–°

---

## è´¡çŒ®æŒ‡å—

åœ¨æäº¤å˜æ›´æ—¶ï¼Œè¯·éµå¾ªä»¥ä¸‹æ ¼å¼æ›´æ–° CHANGELOGï¼š

```markdown
## [ç‰ˆæœ¬å·] - YYYY-MM-DD

### å˜æ›´ç±»å‹

#### ç®€çŸ­æè¿°

**é—®é¢˜æè¿°**ï¼šï¼ˆå¦‚æœæ˜¯ä¿®å¤ï¼‰
- é—®é¢˜ç°è±¡

**ä¿®å¤/æ–°å¢å†…å®¹**ï¼š
- âœ… å…·ä½“å˜æ›´ 1
- âœ… å…·ä½“å˜æ›´ 2

**å½±å“æ–‡ä»¶**ï¼š
- æ–‡ä»¶è·¯å¾„ 1
- æ–‡ä»¶è·¯å¾„ 2
```

---

**ç»´æŠ¤è€…**ï¼šKube Node Manager Team  
**æœ€åæ›´æ–°**ï¼š2025-10-27

