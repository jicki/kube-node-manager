---
- name: Collect system resource status
  hosts: all
  become: true
  tasks:
    - name: Collect system resource info
      ansible.builtin.shell: |
        echo "=== Host: $(hostname) ==="
        echo "--- Uptime & Load ---"
        uptime
        echo
        echo "--- CPU ---"
        top -b -n1 | grep "Cpu(s)"
        echo
        echo "--- Memory ---"
        free -h | grep -E "Mem|Swap"
        echo
        echo "--- Disk ---"
        df -hT | grep -E "^/dev"
      register: sysinfo
      changed_when: false

    - name: Show resource summary
      ansible.builtin.debug:
        msg: "{{ sysinfo.stdout }}"
      verbosity: 0