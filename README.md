<div align="center">

# ğŸš€ Kubernetes èŠ‚ç‚¹ç®¡ç†å™¨

[![Version](https://img.shields.io/badge/version-v2.9.8-blue.svg)](https://github.com/your-repo/kube-node-manager)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Go Version](https://img.shields.io/badge/go-%3E%3D1.21-blue.svg)](https://golang.org/)
[![Vue Version](https://img.shields.io/badge/vue-3.x-brightgreen.svg)](https://vuejs.org/)

**ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ä¼ä¸šçº§ Kubernetes èŠ‚ç‚¹ç®¡ç†å¹³å°**

æ”¯æŒå¤šé›†ç¾¤ç®¡ç†ã€èŠ‚ç‚¹æ ‡ç­¾å’Œæ±¡ç‚¹æ‰¹é‡æ“ä½œã€é£ä¹¦æœºå™¨äººé›†æˆã€GitLab Runner ç®¡ç†ç­‰åŠŸèƒ½

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [éƒ¨ç½²æ–¹å¼](#-éƒ¨ç½²æ–¹å¼) â€¢ [æ–‡æ¡£](#-æ–‡æ¡£) â€¢ [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)

</div>

---

## ğŸ“– ç›®å½•

- [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [æŠ€æœ¯æ¶æ„](#ï¸-æŠ€æœ¯æ¶æ„)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [éƒ¨ç½²æ–¹å¼](#-éƒ¨ç½²æ–¹å¼)
- [ä½¿ç”¨æŒ‡å—](#-ä½¿ç”¨æŒ‡å—)
- [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)
- [æ–‡æ¡£](#-æ–‡æ¡£)
- [å®‰å…¨è¯´æ˜](#ï¸-å®‰å…¨è¯´æ˜)
- [æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)
- [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#-è®¸å¯è¯)

---

## ğŸŒŸ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

#### ğŸ¯ é›†ç¾¤ä¸èŠ‚ç‚¹ç®¡ç†
- **å¤šé›†ç¾¤æ”¯æŒ** - ç»Ÿä¸€ç®¡ç†å¤šä¸ª Kubernetes é›†ç¾¤ï¼Œæ”¯æŒåŠ¨æ€æ·»åŠ å’Œåˆ‡æ¢
- **èŠ‚ç‚¹å¯è§†åŒ–** - å®æ—¶å±•ç¤ºèŠ‚ç‚¹çŠ¶æ€ã€è§’è‰²ã€èµ„æºä½¿ç”¨æƒ…å†µå’Œè°ƒåº¦ä¿¡æ¯
- **èŠ‚ç‚¹è°ƒåº¦æ§åˆ¶** - æ”¯æŒèŠ‚ç‚¹ Cordon/Uncordon æ“ä½œï¼Œå¸¦åŸå› å’Œæ—¶é—´è®°å½•
- **å¥åº·çŠ¶æ€ç›‘æ§** - è‡ªåŠ¨æ£€æµ‹èŠ‚ç‚¹å¥åº·çŠ¶æ€ï¼Œæ”¯æŒé›†ç¾¤å¥åº·æ£€æŸ¥

#### ğŸ·ï¸ æ ‡ç­¾ä¸æ±¡ç‚¹ç®¡ç†
- **æ‰¹é‡æ ‡ç­¾æ“ä½œ** - æ”¯æŒæ‰¹é‡æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤èŠ‚ç‚¹æ ‡ç­¾
- **æ ‡ç­¾æ¨¡æ¿** - é¢„å®šä¹‰æ ‡ç­¾æ¨¡æ¿ï¼Œå¿«é€Ÿåº”ç”¨å¸¸ç”¨æ ‡ç­¾é…ç½®
- **æ±¡ç‚¹æ‰¹é‡ç®¡ç†** - æ‰¹é‡ç®¡ç†èŠ‚ç‚¹æ±¡ç‚¹ï¼ˆNoScheduleã€PreferNoScheduleã€NoExecuteï¼‰
- **æ™ºèƒ½è¿‡æ»¤** - æ”¯æŒæŒ‰æ ‡ç­¾ã€æ±¡ç‚¹ã€èŠ‚ç‚¹åç§°ç­‰å¤šç»´åº¦æœç´¢å’Œè¿‡æ»¤

#### ğŸ‘¥ ç”¨æˆ·ä¸æƒé™
- **RBAC æƒé™æ§åˆ¶** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆAdminã€Userã€Viewerï¼‰
- **LDAP è®¤è¯é›†æˆ** - æ”¯æŒ LDAP/AD ç”¨æˆ·è®¤è¯å’Œè‡ªåŠ¨åŒæ­¥
- **JWT Token è®¤è¯** - å®‰å…¨çš„ Token æœºåˆ¶ï¼Œæ”¯æŒè‡ªåŠ¨åˆ·æ–°
- **æ“ä½œå®¡è®¡æ—¥å¿—** - å®Œæ•´è®°å½•æ‰€æœ‰å…³é”®æ“ä½œï¼Œæ”¯æŒå®¡è®¡è¿½æº¯

#### ğŸ¤– é£ä¹¦æœºå™¨äººé›†æˆ
- **å‘½ä»¤å¼äº¤äº’** - é€šè¿‡é£ä¹¦æœºå™¨äººæ‰§è¡ŒèŠ‚ç‚¹ç®¡ç†æ“ä½œ
- **æ‰¹é‡æ“ä½œ** - æ”¯æŒæ‰¹é‡ cordon/uncordon èŠ‚ç‚¹
- **å¿«æ·å‘½ä»¤** - å¿«é€ŸæŸ¥çœ‹é›†ç¾¤çŠ¶æ€ã€é—®é¢˜èŠ‚ç‚¹å’Œå¥åº·ä¿¡æ¯
- **äº¤äº’å¼å¡ç‰‡** - ä¸°å¯Œçš„å¡ç‰‡äº¤äº’ç•Œé¢ï¼Œæ”¯æŒåˆ†é¡µå’Œæœç´¢
- **ä¼šè¯ç®¡ç†** - æ™ºèƒ½ä¼šè¯çŠ¶æ€ç®¡ç†ï¼Œæ”¯æŒå¤šé›†ç¾¤ä¸Šä¸‹æ–‡åˆ‡æ¢
- **å®æ—¶é€šçŸ¥** - æ“ä½œç»“æœå®æ—¶æ¨é€ï¼Œæ”¯æŒå¤±è´¥è¯¦æƒ…å±•ç¤º

#### ğŸ¦Š GitLab Runner ç®¡ç†
- **Runner é…ç½®** - ç»Ÿä¸€ç®¡ç† GitLab Runner é…ç½®å’Œéƒ¨ç½²
- **Token ç®¡ç†** - å®‰å…¨ç®¡ç† GitLab Runner Token
- **æ‰¹é‡åˆ›å»º** - æ”¯æŒæ‰¹é‡åˆ›å»ºå’Œé…ç½® Runner

#### ğŸ”§ kubectl æ’ä»¶
- **kubectl-node_mgr æ’ä»¶** - æ‰©å±• kubectl å‘½ä»¤è¡Œå·¥å…·
- **èŠ‚ç‚¹å½’å±æŸ¥çœ‹** - å¿«é€ŸæŸ¥çœ‹èŠ‚ç‚¹å½’å±æ ‡ç­¾
- **æ™ºèƒ½ Cordon** - å¸¦è¯¦ç»†è¯´æ˜çš„èŠ‚ç‚¹ cordon æ“ä½œ
- **å¤šæ ¼å¼è¾“å‡º** - æ”¯æŒ tableã€JSONã€YAML ç­‰è¾“å‡ºæ ¼å¼

### æŠ€æœ¯ç‰¹æ€§

- âœ¨ **ç°ä»£åŒ– UI** - å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯è®¿é—®
- ğŸ” **å®æ—¶æœç´¢** - é«˜æ€§èƒ½çš„å®æ—¶æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½
- âš¡ **æ‰¹é‡å¤„ç†** - é«˜æ•ˆçš„æ‰¹é‡æ“ä½œï¼Œæ”¯æŒè¿›åº¦è¿½è¸ª
- ğŸ” **å®‰å…¨åŠ å›º** - å¤šå±‚æ¬¡çš„å®‰å…¨é˜²æŠ¤æœºåˆ¶
- ğŸ“Š **æ•°æ®æŒä¹…åŒ–** - æ”¯æŒ SQLite å’Œ PostgreSQL æ•°æ®åº“
- ğŸ³ **å®¹å™¨åŒ–éƒ¨ç½²** - å®Œæ•´çš„ Docker å’Œ Kubernetes éƒ¨ç½²æ–¹æ¡ˆ
- ğŸ“ˆ **æ€§èƒ½ä¼˜åŒ–** - ç¼“å­˜æœºåˆ¶ã€è¿æ¥æ± ã€å¼‚æ­¥å¤„ç†
- ğŸ”„ **é«˜å¯ç”¨** - æ”¯æŒå¤šå‰¯æœ¬éƒ¨ç½²å’Œæ»šåŠ¨æ›´æ–°

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
```
Go 1.21+
â”œâ”€â”€ Web æ¡†æ¶: Gin
â”œâ”€â”€ æ•°æ®åº“: SQLite3 / PostgreSQL
â”œâ”€â”€ ORM: GORM
â”œâ”€â”€ è®¤è¯: JWT + LDAP
â”œâ”€â”€ K8s å®¢æˆ·ç«¯: client-go
â”œâ”€â”€ é£ä¹¦ SDK: lark-sdk-go
â””â”€â”€ æ—¥å¿—: ç»“æ„åŒ–æ—¥å¿— (JSON)
```

### å‰ç«¯æŠ€æœ¯æ ˆ
```
Vue 3.x
â”œâ”€â”€ ç»„ä»¶åº“: Element Plus
â”œâ”€â”€ çŠ¶æ€ç®¡ç†: Pinia
â”œâ”€â”€ è·¯ç”±: Vue Router 4
â”œâ”€â”€ HTTP å®¢æˆ·ç«¯: Axios
â”œâ”€â”€ æ„å»ºå·¥å…·: Vite
â””â”€â”€ æ ·å¼: CSS3 + Flexbox
```

### éƒ¨ç½²æ¶æ„
```
å®¹å™¨åŒ–éƒ¨ç½²
â”œâ”€â”€ Docker: å¤šé˜¶æ®µæ„å»º
â”œâ”€â”€ Docker Compose: å•æœº/å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ Kubernetes: ç”Ÿäº§ç¯å¢ƒ
â”‚   â”œâ”€â”€ StatefulSet: æœ‰çŠ¶æ€åº”ç”¨
â”‚   â”œâ”€â”€ Service: æœåŠ¡å‘ç°
â”‚   â”œâ”€â”€ Ingress: å¤–éƒ¨è®¿é—®
â”‚   â””â”€â”€ RBAC: æƒé™ç®¡ç†
â”œâ”€â”€ Nginx: åå‘ä»£ç† + é™æ€èµ„æº
â””â”€â”€ æ•°æ®æŒä¹…åŒ–: Volume / PVC
```

### ç³»ç»Ÿæ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ç”¨æˆ·å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Web UI   â”‚  â”‚é£ä¹¦æœºå™¨äºº â”‚  â”‚ kubectl  â”‚              â”‚
â”‚  â”‚  æµè§ˆå™¨   â”‚  â”‚   å®¢æˆ·ç«¯  â”‚  â”‚  æ’ä»¶    â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚           â”‚            â”‚
           â”‚           â”‚            â”‚ gRPC/REST
           â”‚           â”‚            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   API ç½‘å…³å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           Nginx / Ingress                        â”‚  â”‚
â”‚  â”‚    (åå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡ã€HTTPS)                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åº”ç”¨æœåŠ¡å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         kube-node-manager (Gin)                â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚    â”‚
â”‚  â”‚ â”‚è®¤è¯é‰´æƒ  â”‚ â”‚èŠ‚ç‚¹ç®¡ç†  â”‚ â”‚æ ‡ç­¾æ±¡ç‚¹  â”‚          â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚    â”‚
â”‚  â”‚ â”‚ç”¨æˆ·ç®¡ç†  â”‚ â”‚é›†ç¾¤ç®¡ç†  â”‚ â”‚é£ä¹¦é›†æˆ  â”‚          â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚    â”‚
â”‚  â”‚ â”‚GitLab   â”‚ â”‚å®¡è®¡æ—¥å¿—  â”‚ â”‚å¥åº·æ£€æŸ¥  â”‚          â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚             â”‚              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  æ•°æ®åº“    â”‚   â”‚ Kubernetes â”‚  â”‚  LDAP/AD     â”‚
    â”‚ SQLite/   â”‚   â”‚  Clusters  â”‚  â”‚   æœåŠ¡å™¨      â”‚
    â”‚ PostgreSQLâ”‚   â”‚  (å¤šé›†ç¾¤)   â”‚  â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

| ç»„ä»¶ | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|------|---------|------|
| Docker | 20.0+ | å®¹å™¨è¿è¡Œç¯å¢ƒ |
| Docker Compose | 2.0+ | å®¹å™¨ç¼–æ’å·¥å…· |
| Kubernetes | 1.19+ | è‡³å°‘ä¸€ä¸ªå¯è®¿é—®çš„é›†ç¾¤ |
| Go | 1.21+ | åç«¯å¼€å‘ï¼ˆå¯é€‰ï¼‰ |
| Node.js | 16.0+ | å‰ç«¯å¼€å‘ï¼ˆå¯é€‰ï¼‰ |

### æ–¹å¼ä¸€ï¼šDocker Compose å¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èæ–°æ‰‹ï¼‰

æœ€å¿« 5 åˆ†é’Ÿå®Œæˆéƒ¨ç½²ï¼

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd kube-node-manager

# 2. å‡†å¤‡ kubeconfigï¼ˆç¡®ä¿ä½ æœ‰é›†ç¾¤è®¿é—®æƒé™ï¼‰
mkdir -p ~/.kube
# å¤åˆ¶ä½ çš„ kubeconfig æ–‡ä»¶åˆ° ~/.kube/config

# 3. ä¸€é”®å¯åŠ¨ï¼ˆä½¿ç”¨é»˜è®¤é…ç½®ï¼‰
docker-compose up -d

# 4. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# 5. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

**è®¿é—®åº”ç”¨**ï¼š
- ğŸŒ Web ç•Œé¢ï¼šhttp://localhost:8080
- ğŸ“¡ API æ¥å£ï¼šhttp://localhost:8080/api/v1
- ğŸ”‘ é»˜è®¤è´¦æˆ·ï¼š`admin` / `admin123`

### æ–¹å¼äºŒï¼šKubernetes ç”Ÿäº§éƒ¨ç½²

é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒå’Œé«˜å¯ç”¨åœºæ™¯ã€‚

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd kube-node-manager

# 2. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰
export NAMESPACE=kube-system          # éƒ¨ç½²å‘½åç©ºé—´
export DOMAIN=kube-mgr.example.com    # è®¿é—®åŸŸå

# 3. éƒ¨ç½²åˆ° Kubernetes
make k8s-deploy

# 4. æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
kubectl get pods,svc,ingress -n $NAMESPACE -l app=kube-node-manager

# 5. æŸ¥çœ‹åº”ç”¨æ—¥å¿—
make k8s-logs
```

è¯¦ç»†éƒ¨ç½²æ–‡æ¡£è¯·å‚è€ƒï¼š[Kubernetes éƒ¨ç½²æŒ‡å—](deploy/k8s/README.md)

### æ–¹å¼ä¸‰ï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒ

```bash
# 1. å¯åŠ¨åç«¯
cd backend
go mod tidy
go run cmd/main.go

# 2. å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd frontend
npm install
npm run dev
```

### é¦–æ¬¡ç™»å½•é…ç½®

1. ä½¿ç”¨é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ç™»å½•ï¼š`admin` / `admin123`
2. âš ï¸ **é‡è¦**ï¼šç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç 
3. æ·»åŠ ä½ çš„ç¬¬ä¸€ä¸ª Kubernetes é›†ç¾¤ï¼š
   - è¿›å…¥ **é›†ç¾¤ç®¡ç†** é¡µé¢
   - ç‚¹å‡» **æ·»åŠ é›†ç¾¤**
   - ä¸Šä¼  kubeconfig æ–‡ä»¶æˆ–ç²˜è´´å†…å®¹
   - ç‚¹å‡» **æµ‹è¯•è¿æ¥** éªŒè¯
   - ä¿å­˜é…ç½®

4. å¼€å§‹ç®¡ç†èŠ‚ç‚¹ï¼š
   - é€‰æ‹©é›†ç¾¤
   - æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨
   - æ‰§è¡Œæ ‡ç­¾æˆ–æ±¡ç‚¹æ“ä½œ

## ğŸ“ é¡¹ç›®ç»“æ„

```
kube-node-manager/
â”œâ”€â”€ backend/                    # Go åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ cmd/
â”‚   â”‚   â””â”€â”€ main.go            # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ handler/           # HTTP è¯·æ±‚å¤„ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/          # è®¤è¯å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ cluster/       # é›†ç¾¤ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ node/          # èŠ‚ç‚¹ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ label/         # æ ‡ç­¾ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ taint/         # æ±¡ç‚¹ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ user/          # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ feishu/        # é£ä¹¦é›†æˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ gitlab/        # GitLab é›†æˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ audit/         # å®¡è®¡æ—¥å¿—
â”‚   â”‚   â”‚   â””â”€â”€ health/        # å¥åº·æ£€æŸ¥
â”‚   â”‚   â”œâ”€â”€ service/           # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/          # è®¤è¯æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ cluster/       # é›†ç¾¤æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ k8s/           # Kubernetes å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ feishu/        # é£ä¹¦æœºå™¨äººæœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ bot.go              # æœºå™¨äººæ ¸å¿ƒ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ command_*.go        # å‘½ä»¤å¤„ç†å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ card_*.go           # å¡ç‰‡æ„å»ºå™¨
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ event_client.go     # äº‹ä»¶å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ gitlab/        # GitLab æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ ldap/          # LDAP æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ progress/      # è¿›åº¦è¿½è¸ª
â”‚   â”‚   â”œâ”€â”€ model/             # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ user.go        # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ cluster.go     # é›†ç¾¤æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ audit.go       # å®¡è®¡æ—¥å¿—æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ migrate.go     # æ•°æ®åº“è¿ç§»
â”‚   â”‚   â””â”€â”€ config/            # é…ç½®ç®¡ç†
â”‚   â”‚       â””â”€â”€ config.go      # é…ç½®åŠ è½½
â”‚   â”œâ”€â”€ pkg/                   # å…¬å…±åº“
â”‚   â”‚   â”œâ”€â”€ database/          # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”œâ”€â”€ logger/            # æ—¥å¿—å·¥å…·
â”‚   â”‚   â””â”€â”€ static/            # é™æ€èµ„æº
â”‚   â”œâ”€â”€ configs/               # é…ç½®æ–‡ä»¶æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ config.yaml.example
â”‚   â”‚   â””â”€â”€ config-postgres.yaml.example
â”‚   â”œâ”€â”€ go.mod                 # Go ä¾èµ–ç®¡ç†
â”‚   â””â”€â”€ Dockerfile.dev         # å¼€å‘ç¯å¢ƒé•œåƒ
â”‚
â”œâ”€â”€ frontend/                  # Vue 3 å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/    # ä»ªè¡¨ç›˜
â”‚   â”‚   â”‚   â”œâ”€â”€ clusters/     # é›†ç¾¤ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ nodes/        # èŠ‚ç‚¹ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ labels/       # æ ‡ç­¾ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ taints/       # æ±¡ç‚¹ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ users/        # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ feishu/       # é£ä¹¦é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ gitlab/       # GitLab é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ audit/        # å®¡è®¡æ—¥å¿—
â”‚   â”‚   â”‚   â””â”€â”€ login/        # ç™»å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ components/       # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ common/       # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ layout/       # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ api/              # API æ¥å£å°è£…
â”‚   â”‚   â”œâ”€â”€ router/           # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ store/            # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ App.vue           # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.js           # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ package.json          # ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ vite.config.js        # Vite é…ç½®
â”‚   â””â”€â”€ Dockerfile.dev        # å¼€å‘ç¯å¢ƒé•œåƒ
â”‚
â”œâ”€â”€ kubectl-plugin/            # kubectl æ’ä»¶
â”‚   â”œâ”€â”€ cmd/                  # å­å‘½ä»¤å®ç°
â”‚   â”‚   â”œâ”€â”€ root.go           # æ ¹å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ get.go            # æŸ¥çœ‹èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ labels.go         # æ ‡ç­¾ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ cordon.go         # Cordon æ“ä½œ
â”‚   â”‚   â””â”€â”€ uncordon.go       # Uncordon æ“ä½œ
â”‚   â”œâ”€â”€ pkg/k8s/              # Kubernetes å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ main.go               # æ’ä»¶å…¥å£
â”‚   â”œâ”€â”€ go.mod                # Go ä¾èµ–
â”‚   â”œâ”€â”€ Makefile              # æ„å»ºè„šæœ¬
â”‚   â””â”€â”€ README.md             # æ’ä»¶æ–‡æ¡£
â”‚
â”œâ”€â”€ deploy/                   # éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ docker/               # Docker éƒ¨ç½²
â”‚   â”‚   â”œâ”€â”€ docker-compose.yml          # ç”Ÿäº§ç¯å¢ƒ
â”‚   â”‚   â”œâ”€â”€ docker-compose.dev.yml      # å¼€å‘ç¯å¢ƒ
â”‚   â”‚   â”œâ”€â”€ Dockerfile                  # å¤šé˜¶æ®µæ„å»º
â”‚   â”‚   â””â”€â”€ nginx/                      # Nginx é…ç½®
â”‚   â”œâ”€â”€ k8s/                  # Kubernetes éƒ¨ç½²
â”‚   â”‚   â”œâ”€â”€ k8s-statefulset.yaml       # æœ‰çŠ¶æ€éƒ¨ç½²
â”‚   â”‚   â”œâ”€â”€ k8s-service.yaml           # æœåŠ¡é…ç½®
â”‚   â”‚   â”œâ”€â”€ k8s-ingress.yaml           # Ingress é…ç½®
â”‚   â”‚   â”œâ”€â”€ configmap.yaml             # é…ç½®æ˜ å°„
â”‚   â”‚   â”œâ”€â”€ rbac-patch.yaml            # RBAC é…ç½®
â”‚   â”‚   â”œâ”€â”€ kustomization.yaml         # Kustomize é…ç½®
â”‚   â”‚   â””â”€â”€ README.md                  # éƒ¨ç½²æ–‡æ¡£
â”‚   â”œâ”€â”€ scripts/              # éƒ¨ç½²è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ install.sh                 # Docker å®‰è£…
â”‚   â”‚   â”œâ”€â”€ k8s-deploy.sh              # K8s éƒ¨ç½²
â”‚   â”‚   â”œâ”€â”€ backup.sh                  # æ•°æ®å¤‡ä»½
â”‚   â”‚   â””â”€â”€ k8s-cleanup.sh             # æ¸…ç†è„šæœ¬
â”‚   â””â”€â”€ README.md             # éƒ¨ç½²æ€»æ–‡æ¡£
â”‚
â”œâ”€â”€ docs/                     # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ feishu-bot-*.md       # é£ä¹¦æœºå™¨äººæ–‡æ¡£
â”‚   â”œâ”€â”€ gitlab-*.md           # GitLab é›†æˆæ–‡æ¡£
â”‚   â”œâ”€â”€ kubectl-plugin-*.md   # kubectl æ’ä»¶æ–‡æ¡£
â”‚   â”œâ”€â”€ database-*.md         # æ•°æ®åº“é…ç½®æ–‡æ¡£
â”‚   â””â”€â”€ batch-operations-*.md # æ‰¹é‡æ“ä½œæ–‡æ¡£
â”‚
â”œâ”€â”€ scripts/                  # è¿ç»´è„šæœ¬
â”‚   â”œâ”€â”€ backup.sh             # æ•°æ®å¤‡ä»½è„šæœ¬
â”‚   â”œâ”€â”€ migrate.sh            # æ•°æ®è¿ç§»è„šæœ¬
â”‚   â”œâ”€â”€ sqlite-to-postgres-v3.go  # SQLite è½¬ PostgreSQL
â”‚   â””â”€â”€ get_sa_kubeconfig.sh  # è·å– ServiceAccount kubeconfig
â”‚
â”œâ”€â”€ Dockerfile                # ç”Ÿäº§ç¯å¢ƒé•œåƒ
â”œâ”€â”€ Makefile                  # é¡¹ç›®æ„å»ºè„šæœ¬
â”œâ”€â”€ VERSION                   # ç‰ˆæœ¬æ–‡ä»¶
â””â”€â”€ README.md                 # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ’¡ ä½¿ç”¨æŒ‡å—

### Web ç•Œé¢ä½¿ç”¨

#### 1. é›†ç¾¤ç®¡ç†
```
è®¾ç½® â†’ é›†ç¾¤ç®¡ç† â†’ æ·»åŠ é›†ç¾¤
- ä¸Šä¼  kubeconfig æ–‡ä»¶æˆ–ç²˜è´´å†…å®¹
- æµ‹è¯•è¿æ¥éªŒè¯
- é€‰æ‹©é»˜è®¤é›†ç¾¤
```

#### 2. èŠ‚ç‚¹ç®¡ç†
```
èŠ‚ç‚¹ç®¡ç† â†’ æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨
- æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€ã€è§’è‰²ã€èµ„æº
- æ‰§è¡Œ Cordon/Uncordon æ“ä½œ
- æœç´¢å’Œè¿‡æ»¤èŠ‚ç‚¹
```

#### 3. æ ‡ç­¾ç®¡ç†
```
æ ‡ç­¾ç®¡ç† â†’ æ‰¹é‡æ“ä½œ
- é€‰æ‹©å¤šä¸ªèŠ‚ç‚¹
- æ·»åŠ /åˆ é™¤æ ‡ç­¾
- ä½¿ç”¨æ ‡ç­¾æ¨¡æ¿å¿«é€Ÿåº”ç”¨
```

#### 4. æ±¡ç‚¹ç®¡ç†
```
æ±¡ç‚¹ç®¡ç† â†’ æ‰¹é‡æ“ä½œ
- é€‰æ‹©èŠ‚ç‚¹å’Œæ±¡ç‚¹æ•ˆæœï¼ˆNoSchedule/PreferNoSchedule/NoExecuteï¼‰
- è®¾ç½®æ±¡ç‚¹é”®å€¼å¯¹
- æ‰¹é‡åº”ç”¨æ±¡ç‚¹é…ç½®
```

### é£ä¹¦æœºå™¨äººä½¿ç”¨

#### é…ç½®æœºå™¨äºº
1. åœ¨é£ä¹¦å¼€æ”¾å¹³å°åˆ›å»ºåº”ç”¨
2. è·å– App ID å’Œ App Secret
3. åœ¨ç³»ç»Ÿä¸­é…ç½®é£ä¹¦åº”ç”¨ä¿¡æ¯
4. æ·»åŠ æœºå™¨äººåˆ°ç¾¤èŠ

#### å¸¸ç”¨å‘½ä»¤

```bash
# å¸®åŠ©ä¿¡æ¯
/help                          # æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤
/help cluster                  # æŸ¥çœ‹é›†ç¾¤å‘½ä»¤å¸®åŠ©
/help node                     # æŸ¥çœ‹èŠ‚ç‚¹å‘½ä»¤å¸®åŠ©

# é›†ç¾¤ç®¡ç†
/cluster list                  # æŸ¥çœ‹æ‰€æœ‰é›†ç¾¤
/cluster set <é›†ç¾¤å>          # åˆ‡æ¢å½“å‰é›†ç¾¤
/cluster info                  # æŸ¥çœ‹å½“å‰é›†ç¾¤ä¿¡æ¯

# èŠ‚ç‚¹ç®¡ç†
/node list                     # æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨
/node get <èŠ‚ç‚¹å>             # æŸ¥çœ‹èŠ‚ç‚¹è¯¦æƒ…
/node cordon <èŠ‚ç‚¹å> [åŸå› ]   # ç¦æ­¢è°ƒåº¦èŠ‚ç‚¹
/node uncordon <èŠ‚ç‚¹å>        # æ¢å¤è°ƒåº¦èŠ‚ç‚¹

# æ‰¹é‡æ“ä½œ
/node batch cordon node1,node2,node3 ç»´æŠ¤å‡çº§
/node batch uncordon node1,node2,node3

# å¿«æ·å‘½ä»¤
/quick status                  # æŸ¥çœ‹é›†ç¾¤çŠ¶æ€æ¦‚è§ˆ
/quick nodes                   # æŸ¥çœ‹é—®é¢˜èŠ‚ç‚¹
/quick health                  # æ‰€æœ‰é›†ç¾¤å¥åº·æ£€æŸ¥

# æ ‡ç­¾ç®¡ç†
/label list <èŠ‚ç‚¹å>           # æŸ¥çœ‹èŠ‚ç‚¹æ ‡ç­¾
/label add <èŠ‚ç‚¹å> key=value  # æ·»åŠ æ ‡ç­¾
/label remove <èŠ‚ç‚¹å> key     # åˆ é™¤æ ‡ç­¾

# æ±¡ç‚¹ç®¡ç†
/taint list <èŠ‚ç‚¹å>           # æŸ¥çœ‹èŠ‚ç‚¹æ±¡ç‚¹
/taint add <èŠ‚ç‚¹å> key=value:NoSchedule  # æ·»åŠ æ±¡ç‚¹
/taint remove <èŠ‚ç‚¹å> key     # åˆ é™¤æ±¡ç‚¹

# å®¡è®¡æ—¥å¿—
/audit recent                  # æŸ¥çœ‹æœ€è¿‘æ“ä½œ
/audit user <ç”¨æˆ·å>           # æŸ¥çœ‹æŒ‡å®šç”¨æˆ·æ“ä½œ
```

è¯¦ç»†ä½¿ç”¨æ–‡æ¡£ï¼š[é£ä¹¦æœºå™¨äººä½¿ç”¨æŒ‡å—](docs/feishu-bot-batch-and-quick-commands.md)

### kubectl æ’ä»¶ä½¿ç”¨

#### å®‰è£…æ’ä»¶
```bash
cd kubectl-plugin
make build-plugin
make install-plugin

# éªŒè¯å®‰è£…
kubectl node_mgr --help
```

#### å¸¸ç”¨å‘½ä»¤
```bash
# æŸ¥çœ‹èŠ‚ç‚¹è°ƒåº¦çŠ¶æ€
kubectl node_mgr get
kubectl node_mgr get node1

# æŸ¥çœ‹èŠ‚ç‚¹å½’å±
kubectl node_mgr labels
kubectl node_mgr labels node1

# Cordon æ“ä½œ
kubectl node_mgr cordon node1 --reason "ç³»ç»Ÿç»´æŠ¤"
kubectl node_mgr cordon node1,node2,node3 --reason "æ‰¹é‡ç»´æŠ¤"

# Uncordon æ“ä½œ
kubectl node_mgr uncordon node1
kubectl node_mgr uncordon node1,node2,node3

# æŸ¥çœ‹å·² cordon çš„èŠ‚ç‚¹
kubectl node_mgr cordon list

# å¤šæ ¼å¼è¾“å‡º
kubectl node_mgr get -o json
kubectl node_mgr labels -o yaml
```

è¯¦ç»†ä½¿ç”¨æ–‡æ¡£ï¼š[kubectl æ’ä»¶æ–‡æ¡£](kubectl-plugin/README.md)

## ğŸ”§ å¼€å‘æŒ‡å—

### åç«¯å¼€å‘

```bash
# 1. è¿›å…¥åç«¯ç›®å½•
cd backend

# 2. å®‰è£…ä¾èµ–
go mod tidy

# 3. é…ç½®ç¯å¢ƒï¼ˆå¤åˆ¶å¹¶ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼‰
cp configs/config.yaml.example configs/config.yaml

# 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
go run cmd/main.go

# 5. è¿è¡Œæµ‹è¯•
go test ./...

# 6. ä»£ç æ ¼å¼åŒ–
go fmt ./...

# 7. ä»£ç æ£€æŸ¥
go vet ./...
```

#### åç«¯é¡¹ç›®ç»“æ„è¯´æ˜
- `cmd/`: åº”ç”¨å…¥å£
- `internal/handler/`: HTTP è¯·æ±‚å¤„ç†
- `internal/service/`: ä¸šåŠ¡é€»è¾‘å®ç°
- `internal/model/`: æ•°æ®æ¨¡å‹å®šä¹‰
- `pkg/`: å¯å¤ç”¨çš„å…¬å…±åº“

### å‰ç«¯å¼€å‘

```bash
# 1. è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# 2. å®‰è£…ä¾èµ–
npm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆé»˜è®¤ http://localhost:5173ï¼‰
npm run dev

# 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# 5. é¢„è§ˆç”Ÿäº§æ„å»º
npm run preview

# 6. ä»£ç æ£€æŸ¥
npm run lint
```

#### å‰ç«¯é¡¹ç›®ç»“æ„è¯´æ˜
- `src/views/`: é¡µé¢ç»„ä»¶
- `src/components/`: å¯å¤ç”¨ç»„ä»¶
- `src/api/`: API æ¥å£å°è£…
- `src/store/`: çŠ¶æ€ç®¡ç†
- `src/router/`: è·¯ç”±é…ç½®

### ä»£ç è§„èŒƒ

#### Go ä»£ç è§„èŒƒ
- éµå¾ª Go å®˜æ–¹ä»£ç è§„èŒƒ
- ä½¿ç”¨ `gofmt` æ ¼å¼åŒ–ä»£ç 
- æ‰€æœ‰å…¬å…±å‡½æ•°å¿…é¡»æ·»åŠ æ³¨é‡Š
- é”™è¯¯å¤„ç†ä¸èƒ½è¢«å¿½ç•¥
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å’Œå‡½æ•°å

#### Vue ä»£ç è§„èŒƒ
- éµå¾ª Vue 3 å®˜æ–¹é£æ ¼æŒ‡å—
- ç»„ä»¶åä½¿ç”¨ PascalCase
- Props å®šä¹‰å¿…é¡»åŒ…å«ç±»å‹
- ä½¿ç”¨ Composition API
- åˆç†æ‹†åˆ†ç»„ä»¶ï¼Œä¿æŒå•ä¸€èŒè´£

### æäº¤è§„èŒƒ

ä½¿ç”¨è¯­ä¹‰åŒ–æäº¤æ¶ˆæ¯ï¼š

```
feat: æ·»åŠ æ–°åŠŸèƒ½
fix: ä¿®å¤ bug
docs: æ›´æ–°æ–‡æ¡£
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
perf: æ€§èƒ½ä¼˜åŒ–
test: æ·»åŠ æµ‹è¯•
chore: æ„å»ºé…ç½®æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
```

ç¤ºä¾‹ï¼š
```bash
git commit -m "feat: æ·»åŠ é£ä¹¦æœºå™¨äººæ‰¹é‡æ“ä½œåŠŸèƒ½"
git commit -m "fix: ä¿®å¤èŠ‚ç‚¹åˆ—è¡¨åˆ†é¡µæ˜¾ç¤ºé—®é¢˜"
git commit -m "docs: æ›´æ–° README å®‰è£…è¯´æ˜"
```

## ğŸ” æƒé™è¯´æ˜

### ç”¨æˆ·è§’è‰²

| è§’è‰² | æƒé™è¯´æ˜ | å¯æ‰§è¡Œæ“ä½œ |
|-----|---------|----------|
| **Adminï¼ˆç®¡ç†å‘˜ï¼‰** | å®Œå…¨æ§åˆ¶æƒé™ | â€¢ ç®¡ç†ç”¨æˆ·å’Œè§’è‰²<br>â€¢ æ·»åŠ /åˆ é™¤é›†ç¾¤<br>â€¢ æ‰€æœ‰èŠ‚ç‚¹æ“ä½œ<br>â€¢ é…ç½®ç³»ç»Ÿè®¾ç½®<br>â€¢ æŸ¥çœ‹å®¡è®¡æ—¥å¿— |
| **Userï¼ˆæ“ä½œå‘˜ï¼‰** | æ“ä½œæƒé™ | â€¢ æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯<br>â€¢ ç®¡ç†èŠ‚ç‚¹æ ‡ç­¾å’Œæ±¡ç‚¹<br>â€¢ æ‰§è¡Œ Cordon/Uncordon<br>â€¢ æŸ¥çœ‹æ“ä½œæ—¥å¿— |
| **Viewerï¼ˆè§‚å¯Ÿè€…ï¼‰** | åªè¯»æƒé™ | â€¢ æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯<br>â€¢ æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€<br>â€¢ æŸ¥çœ‹æ ‡ç­¾å’Œæ±¡ç‚¹<br>â€¢ æ— ä¿®æ”¹æƒé™ |

### API æƒé™æ§åˆ¶

```
è®¤è¯æµç¨‹ï¼š
ç”¨æˆ·ç™»å½• â†’ è·å– JWT Token â†’ æºå¸¦ Token è®¿é—® API â†’ éªŒè¯èº«ä»½å’Œæƒé™ â†’ è¿”å›ç»“æœ
```

**æƒé™çŸ©é˜µ**ï¼š

| API è·¯å¾„ | Admin | User | Viewer |
|---------|-------|------|--------|
| `/api/v1/users/*` | âœ… | âŒ | âŒ |
| `/api/v1/clusters/*` (POST/PUT/DELETE) | âœ… | âŒ | âŒ |
| `/api/v1/clusters/*` (GET) | âœ… | âœ… | âœ… |
| `/api/v1/nodes/*` (POST/PUT/DELETE) | âœ… | âœ… | âŒ |
| `/api/v1/nodes/*` (GET) | âœ… | âœ… | âœ… |
| `/api/v1/labels/*` (POST/PUT/DELETE) | âœ… | âœ… | âŒ |
| `/api/v1/labels/*` (GET) | âœ… | âœ… | âœ… |
| `/api/v1/taints/*` (POST/PUT/DELETE) | âœ… | âœ… | âŒ |
| `/api/v1/taints/*` (GET) | âœ… | âœ… | âœ… |
| `/api/v1/audit/*` | âœ… | âœ… | âœ… |

## ğŸ”Œ LDAP é›†æˆ

### é…ç½® LDAP è®¤è¯

åœ¨ `backend/configs/config.yaml` ä¸­é…ç½®ï¼š

```yaml
ldap:
  enabled: true                              # å¯ç”¨ LDAP è®¤è¯
  host: "ldap.example.com"                   # LDAP æœåŠ¡å™¨åœ°å€
  port: 389                                  # LDAP ç«¯å£ï¼ˆ389 æˆ– 636ï¼‰
  use_ssl: false                             # æ˜¯å¦ä½¿ç”¨ SSL
  base_dn: "dc=example,dc=com"               # åŸºç¡€ DN
  user_filter: "(uid=%s)"                    # ç”¨æˆ·è¿‡æ»¤å™¨
  admin_dn: "cn=admin,dc=example,dc=com"     # ç®¡ç†å‘˜ DN
  admin_password: "admin_password"           # ç®¡ç†å‘˜å¯†ç 
  
  # ç”¨æˆ·å±æ€§æ˜ å°„
  attributes:
    username: "uid"
    email: "mail"
    display_name: "cn"
```

### LDAP è®¤è¯æµç¨‹

```
1. ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
   â†“
2. ç³»ç»Ÿä½¿ç”¨ç®¡ç†å‘˜è´¦æˆ·è¿æ¥ LDAP
   â†“
3. æœç´¢ç”¨æˆ· DNï¼ˆæ ¹æ® user_filterï¼‰
   â†“
4. ä½¿ç”¨ç”¨æˆ· DN å’Œå¯†ç éªŒè¯
   â†“
5. éªŒè¯æˆåŠŸååˆ›å»º/æ›´æ–°æœ¬åœ°ç”¨æˆ·
   â†“
6. è¿”å› JWT Token
```

### æ”¯æŒçš„ LDAP æœåŠ¡å™¨
- âœ… OpenLDAP
- âœ… Active Directory (AD)
- âœ… FreeIPA
- âœ… å…¶ä»–å…¼å®¹ LDAP v3 çš„æœåŠ¡å™¨

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### å¥åº·æ£€æŸ¥ç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ | å“åº”ç¤ºä¾‹ |
|-----|------|------|---------|
| `/api/v1/health` | GET | åº”ç”¨å¥åº·çŠ¶æ€ | `{"status":"healthy","timestamp":"..."}` |
| `/api/v1/health/db` | GET | æ•°æ®åº“è¿æ¥çŠ¶æ€ | `{"status":"connected"}` |
| `/api/v1/health/k8s` | GET | Kubernetes è¿æ¥ | `{"status":"ok","clusters":["dev","prod"]}` |

### æ—¥å¿—ç³»ç»Ÿ

#### æ—¥å¿—çº§åˆ«
```
DEBUG   â†’ è°ƒè¯•ä¿¡æ¯ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
INFO    â†’ ä¸€èˆ¬æ“ä½œæ—¥å¿—
WARNING â†’ è­¦å‘Šä¿¡æ¯
ERROR   â†’ é”™è¯¯ä¿¡æ¯
FATAL   â†’ è‡´å‘½é”™è¯¯
```

#### æ—¥å¿—æ ¼å¼ï¼ˆJSONï¼‰
```json
{
  "time": "2024-10-22T10:30:00Z",
  "level": "INFO",
  "msg": "èŠ‚ç‚¹æ ‡ç­¾æ›´æ–°æˆåŠŸ",
  "user": "admin",
  "cluster": "production",
  "node": "node-1",
  "action": "label_update",
  "duration": "125ms"
}
```

### å®¡è®¡æ—¥å¿—

ç³»ç»Ÿè‡ªåŠ¨è®°å½•ä»¥ä¸‹æ“ä½œçš„å®¡è®¡æ—¥å¿—ï¼š

| æ“ä½œç±»å‹ | è®°å½•å†…å®¹ |
|---------|---------|
| ç”¨æˆ·ç™»å½•/ç™»å‡º | ç”¨æˆ·åã€IP åœ°å€ã€æ—¶é—´æˆ³ |
| é›†ç¾¤ç®¡ç† | æ·»åŠ /åˆ é™¤/ä¿®æ”¹é›†ç¾¤é…ç½® |
| èŠ‚ç‚¹æ“ä½œ | Cordon/Uncordonã€èŠ‚ç‚¹åç§°ã€åŸå›  |
| æ ‡ç­¾ç®¡ç† | æ·»åŠ /åˆ é™¤æ ‡ç­¾ã€èŠ‚ç‚¹ã€é”®å€¼å¯¹ |
| æ±¡ç‚¹ç®¡ç† | æ·»åŠ /åˆ é™¤æ±¡ç‚¹ã€èŠ‚ç‚¹ã€æ±¡ç‚¹ä¿¡æ¯ |
| ç”¨æˆ·ç®¡ç† | åˆ›å»º/ä¿®æ”¹/åˆ é™¤ç”¨æˆ·ã€è§’è‰²å˜æ›´ |
| é…ç½®å˜æ›´ | ç³»ç»Ÿé…ç½®ä¿®æ”¹è®°å½• |

**å®¡è®¡æ—¥å¿—æŸ¥è¯¢**ï¼š
- Web ç•Œé¢ï¼šå®¡è®¡æ—¥å¿—é¡µé¢
- é£ä¹¦æœºå™¨äººï¼š`/audit recent` æˆ– `/audit user <ç”¨æˆ·å>`
- APIï¼š`GET /api/v1/audit`

## ğŸ›¡ï¸ å®‰å…¨è¯´æ˜

### è®¤è¯ä¸æˆæƒ

#### JWT Token æœºåˆ¶
- **Token æœ‰æ•ˆæœŸ**ï¼š24 å°æ—¶ï¼ˆå¯é…ç½®ï¼‰
- **åˆ·æ–°æœºåˆ¶**ï¼šToken è¿‡æœŸå‰è‡ªåŠ¨åˆ·æ–°
- **å­˜å‚¨æ–¹å¼**ï¼šæµè§ˆå™¨ LocalStorageï¼ˆå‰ç«¯ï¼‰/ Memoryï¼ˆåç«¯ï¼‰
- **ä¼ è¾“æ–¹å¼**ï¼šHTTP Header `Authorization: Bearer <token>`

#### å¯†ç å®‰å…¨
- **åŠ å¯†ç®—æ³•**ï¼šbcryptï¼ˆcost factor: 10ï¼‰
- **å¯†ç ç­–ç•¥**ï¼ˆå¯é…ç½®ï¼‰ï¼š
  - æœ€å°é•¿åº¦ï¼š8 å­—ç¬¦
  - å¿…é¡»åŒ…å«ï¼šå¤§å°å†™å­—æ¯ã€æ•°å­—
  - ç¦æ­¢å¸¸è§å¼±å¯†ç 
- **å¯†ç é‡ç½®**ï¼šç®¡ç†å‘˜å¯é‡ç½®ç”¨æˆ·å¯†ç 

### æ•°æ®å®‰å…¨

#### æ•æ„Ÿæ•°æ®ä¿æŠ¤
- âœ… æ•°æ®åº“å¯†ç åŠ å¯†å­˜å‚¨
- âœ… Kubeconfig æ–‡ä»¶åŠ å¯†å­˜å‚¨
- âœ… API å¯†é’¥åŠ å¯†å­˜å‚¨
- âœ… LDAP å¯†ç ä¸åœ¨æ—¥å¿—ä¸­æ˜¾ç¤º

#### SQL æ³¨å…¥é˜²æŠ¤
- ä½¿ç”¨ GORM å‚æ•°åŒ–æŸ¥è¯¢
- è¾“å…¥éªŒè¯å’Œæ¸…ç†
- é¢„ç¼–è¯‘è¯­å¥

#### XSS é˜²æŠ¤
- å‰ç«¯è¾“å‡ºè½¬ä¹‰
- CSPï¼ˆContent Security Policyï¼‰ç­–ç•¥
- HTTP å®‰å…¨å¤´éƒ¨è®¾ç½®

### ç½‘ç»œå®‰å…¨

#### HTTPS é…ç½®
```nginx
# Nginx é…ç½®ç¤ºä¾‹
server {
    listen 443 ssl http2;
    server_name kube-mgr.example.com;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    
    # å¼ºåˆ¶ HTTPS
    add_header Strict-Transport-Security "max-age=31536000" always;
    
    location / {
        proxy_pass http://backend:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

#### CORS é…ç½®
```go
// å…è®¸çš„æ¥æºï¼ˆé…ç½®æ–‡ä»¶ï¼‰
AllowOrigins: []string{"https://kube-mgr.example.com"}
AllowMethods: []string{"GET", "POST", "PUT", "DELETE", "OPTIONS"}
AllowHeaders: []string{"Origin", "Authorization", "Content-Type"}
ExposeHeaders: []string{"Content-Length"}
AllowCredentials: true
MaxAge: 12 * time.Hour
```

#### å®‰å…¨å¤´éƒ¨
```
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
X-XSS-Protection: 1; mode=block
Strict-Transport-Security: max-age=31536000; includeSubDomains
Content-Security-Policy: default-src 'self'
```

### å®‰å…¨æœ€ä½³å®è·µ

#### ç”Ÿäº§ç¯å¢ƒæ£€æŸ¥æ¸…å•
- [ ] ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç 
- [ ] é…ç½®å¼ºå¯†ç ç­–ç•¥
- [ ] å¯ç”¨ HTTPS
- [ ] æ›´æ”¹é»˜è®¤ JWT å¯†é’¥
- [ ] é…ç½®é˜²ç«å¢™è§„åˆ™
- [ ] é™åˆ¶ API è®¿é—®é€Ÿç‡
- [ ] å®šæœŸå¤‡ä»½æ•°æ®
- [ ] ç›‘æ§å®¡è®¡æ—¥å¿—
- [ ] å®šæœŸæ›´æ–°ä¾èµ–
- [ ] é…ç½®å‘Šè­¦é€šçŸ¥

#### æœ€å°æƒé™åŸåˆ™
```yaml
# Kubernetes RBAC ç¤ºä¾‹
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: kube-node-manager
rules:
- apiGroups: [""]
  resources: ["nodes"]
  verbs: ["get", "list", "watch", "patch", "update"]
- apiGroups: [""]
  resources: ["pods"]
  verbs: ["get", "list", "watch"]
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. æ— æ³•è¿æ¥ Kubernetes é›†ç¾¤

**é—®é¢˜è¡¨ç°**ï¼š
- é›†ç¾¤åˆ—è¡¨æ˜¾ç¤º"è¿æ¥å¤±è´¥"
- èŠ‚ç‚¹åˆ—è¡¨æ— æ³•åŠ è½½
- é”™è¯¯æ¶ˆæ¯ï¼š"connection refused" æˆ– "unauthorized"

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. éªŒè¯ kubeconfig æ–‡ä»¶æœ‰æ•ˆæ€§
kubectl cluster-info
kubectl get nodes

# 2. æ£€æŸ¥é›†ç¾¤è®¿é—®æƒé™
kubectl auth can-i get nodes

# 3. æŸ¥çœ‹åº”ç”¨æ—¥å¿—
docker-compose logs backend | grep -i "kubernetes"

# 4. æµ‹è¯•ç½‘ç»œè¿æ¥
ping <kubernetes-api-server-host>
telnet <kubernetes-api-server-host> 6443
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿ kubeconfig æ–‡ä»¶è·¯å¾„æ­£ç¡®
- éªŒè¯ ServiceAccount æƒé™ï¼ˆKubernetes éƒ¨ç½²ï¼‰
- æ£€æŸ¥ç½‘ç»œç­–ç•¥å’Œé˜²ç«å¢™è§„åˆ™
- ç¡®è®¤ API Server è¯ä¹¦æœ‰æ•ˆ

#### 2. ç™»å½•å¤±è´¥

**é—®é¢˜è¡¨ç°**ï¼š
- ç™»å½•é¡µé¢æç¤º"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"
- LDAP è®¤è¯å¤±è´¥
- Token éªŒè¯å¤±è´¥

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥æ•°æ®åº“ä¸­çš„ç”¨æˆ·
# SQLite
sqlite3 backend/data/kube-node-manager.db "SELECT username, role FROM users;"

# 2. æŸ¥çœ‹è®¤è¯ç›¸å…³æ—¥å¿—
docker-compose logs backend | grep -i "auth\|login"

# 3. æµ‹è¯• LDAP è¿æ¥ï¼ˆå¦‚æœå¯ç”¨ï¼‰
ldapsearch -x -H ldap://<ldap-host>:<port> -D "<admin-dn>" -w "<password>" -b "<base-dn>"
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨é»˜è®¤è´¦æˆ·ï¼š`admin` / `admin123`
- é‡ç½®ç®¡ç†å‘˜å¯†ç ï¼ˆæ•°æ®åº“æ“ä½œï¼‰
- æ£€æŸ¥ LDAP é…ç½®å‚æ•°
- éªŒè¯ JWT å¯†é’¥é…ç½®

#### 3. å‰ç«¯é¡µé¢æ— æ³•åŠ è½½

**é—®é¢˜è¡¨ç°**ï¼š
- ç™½å±æˆ–ç©ºç™½é¡µé¢
- é™æ€èµ„æº 404
- æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps

# 2. æŸ¥çœ‹å‰ç«¯æ—¥å¿—
docker-compose logs frontend

# 3. æŸ¥çœ‹ Nginx æ—¥å¿—
docker-compose logs nginx

# 4. æµ‹è¯•åç«¯ API
curl http://localhost:8080/api/v1/health
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œ
- æ£€æŸ¥ Nginx é…ç½®å’Œä»£ç†è®¾ç½®
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯è¯¦æƒ…

#### 4. æ•°æ®åº“è¿æ¥å¤±è´¥

**é—®é¢˜è¡¨ç°**ï¼š
- åº”ç”¨å¯åŠ¨å¤±è´¥
- é”™è¯¯æ¶ˆæ¯ï¼š"database connection failed"

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™
ls -la backend/data/

# 2. æµ‹è¯•æ•°æ®åº“è¿æ¥
sqlite3 backend/data/kube-node-manager.db ".tables"

# 3. æŸ¥çœ‹æ•°æ®åº“é…ç½®
cat backend/configs/config.yaml | grep -A 5 database
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿æ•°æ®ç›®å½•å­˜åœ¨ä¸”æœ‰å†™æƒé™
- æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æ˜¯å¦æŸå
- PostgreSQL: éªŒè¯è¿æ¥å­—ç¬¦ä¸²å’Œå‡­æ®

#### 5. é£ä¹¦æœºå™¨äººæ— å“åº”

**é—®é¢˜è¡¨ç°**ï¼š
- å‘é€å‘½ä»¤æ— ååº”
- æœºå™¨äººç¦»çº¿
- å¡ç‰‡æ— æ³•æ˜¾ç¤º

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥é£ä¹¦é…ç½®
curl http://localhost:8080/api/v1/feishu/status

# 2. æŸ¥çœ‹é£ä¹¦ç›¸å…³æ—¥å¿—
docker-compose logs backend | grep -i "feishu\|lark"

# 3. éªŒè¯ webhook é…ç½®
# åœ¨é£ä¹¦å¼€æ”¾å¹³å°æ£€æŸ¥äº‹ä»¶è®¢é˜…å’Œå›è°ƒåœ°å€
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- éªŒè¯ App ID å’Œ App Secret
- æ£€æŸ¥å›è°ƒ URL æ˜¯å¦å¯è®¿é—®
- ç¡®è®¤äº‹ä»¶è®¢é˜…é…ç½®æ­£ç¡®
- é‡æ–°æ·»åŠ æœºå™¨äººåˆ°ç¾¤èŠ

#### 6. æ€§èƒ½é—®é¢˜

**é—®é¢˜è¡¨ç°**ï¼š
- é¡µé¢åŠ è½½ç¼“æ…¢
- API å“åº”å»¶è¿Ÿ
- å†…å­˜å ç”¨è¿‡é«˜

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
docker stats

# 2. æ£€æŸ¥æ•°æ®åº“æ€§èƒ½
# æŸ¥çœ‹æ•°æ®åº“å¤§å°å’Œç´¢å¼•

# 3. åˆ†ææ—¥å¿—ä¸­çš„æ…¢è¯·æ±‚
docker-compose logs backend | grep -i "duration\|took"
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¢åŠ å®¹å™¨èµ„æºé™åˆ¶
- ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢å’Œç´¢å¼•
- å¯ç”¨ç¼“å­˜æœºåˆ¶
- æ¸…ç†è¿‡æœŸå®¡è®¡æ—¥å¿—

### æ—¥å¿—æŸ¥çœ‹å‘½ä»¤

```bash
# Docker Compose éƒ¨ç½²
docker-compose logs -f                    # æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs -f backend            # åç«¯æ—¥å¿—
docker-compose logs -f frontend           # å‰ç«¯æ—¥å¿—
docker-compose logs --tail=100 backend    # æœ€è¿‘ 100 è¡Œ

# Kubernetes éƒ¨ç½²
kubectl logs -f deployment/kube-node-manager -n kube-system
kubectl logs -f <pod-name> -n kube-system
kubectl logs <pod-name> --previous        # ä¸Šä¸€ä¸ªå®¹å™¨çš„æ—¥å¿—
```

### è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è°ƒè¯•æ—¥å¿—
export LOG_LEVEL=debug
docker-compose restart backend

# å‰ç«¯å¼€å‘æ¨¡å¼
cd frontend
npm run dev

# åç«¯å¼€å‘æ¨¡å¼
cd backend
go run cmd/main.go
```

## ğŸ”„ éƒ¨ç½²æ–¹å¼

### Docker Compose éƒ¨ç½²ï¼ˆå•æœºï¼‰

é€‚ç”¨äºå¼€å‘ç¯å¢ƒå’Œå°è§„æ¨¡éƒ¨ç½²ï¼š

```bash
# ç”Ÿäº§ç¯å¢ƒ
docker-compose -f deploy/docker/docker-compose.prod.yml up -d

# å¼€å‘ç¯å¢ƒ
docker-compose -f deploy/docker/docker-compose.dev.yml up -d
```

è¯¦ç»†æ–‡æ¡£ï¼š[Docker éƒ¨ç½²æŒ‡å—](deploy/README.md)

### Kubernetes éƒ¨ç½²ï¼ˆé›†ç¾¤ï¼‰

é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒå’Œé«˜å¯ç”¨åœºæ™¯ï¼š

```bash
# ä½¿ç”¨ Makefile
make k8s-deploy

# æˆ–ä½¿ç”¨ kubectl
kubectl apply -k deploy/k8s/

# æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
kubectl get pods,svc,ingress -n kube-system -l app=kube-node-manager
```

è¯¦ç»†æ–‡æ¡£ï¼š[Kubernetes éƒ¨ç½²æŒ‡å—](deploy/k8s/README.md)

### æ•°æ®åº“é…ç½®

#### SQLiteï¼ˆé»˜è®¤ï¼‰
- é€‚åˆï¼šå¼€å‘ç¯å¢ƒã€å°è§„æ¨¡éƒ¨ç½²
- é…ç½®ï¼šæ— éœ€é¢å¤–é…ç½®
- æ•°æ®æ–‡ä»¶ï¼š`backend/data/kube-node-manager.db`

#### PostgreSQLï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰
- é€‚åˆï¼šç”Ÿäº§ç¯å¢ƒã€å¤§è§„æ¨¡éƒ¨ç½²
- é…ç½®ï¼šå‚è€ƒ `backend/configs/config-postgres.yaml.example`
- è¿ç§»å·¥å…·ï¼š`scripts/sqlite-to-postgres-v3.go`

è¯¦ç»†æ–‡æ¡£ï¼š[æ•°æ®åº“é…ç½®æŒ‡å—](docs/database-configuration-guide.md)

## ğŸ“š æ–‡æ¡£

### åŠŸèƒ½æ–‡æ¡£
- [é£ä¹¦æœºå™¨äººæ‰¹é‡æ“ä½œå’Œå¿«æ·å‘½ä»¤](docs/feishu-bot-batch-and-quick-commands.md)
- [é£ä¹¦æœºå™¨äººäº¤äº’å¼å¡ç‰‡å’Œå‘½ä»¤è§£æ](docs/feishu-bot-interactive-and-parser.md)
- [é£ä¹¦æœºå™¨äººæ ‡ç­¾å’Œæ±¡ç‚¹ç®¡ç†](docs/feishu-bot-label-taint-implementation.md)
- [é£ä¹¦æœºå™¨äººä¼šè¯ç®¡ç†](docs/feishu-bot-session-management.md)
- [é£ä¹¦æœºå™¨äººä¼˜åŒ–å’Œæ€§èƒ½æå‡](docs/feishu-bot-optimization-and-performance.md)
- [æ‰¹é‡æ“ä½œä¼˜åŒ–](docs/batch-operations-optimization.md)

### éƒ¨ç½²ä¸é…ç½®
- [æ•°æ®åº“é…ç½®æŒ‡å—](docs/database-configuration-guide.md)
- [Docker éƒ¨ç½²æ–‡æ¡£](deploy/README.md)
- [Kubernetes éƒ¨ç½²æ–‡æ¡£](deploy/k8s/README.md)
- [æ•°æ®åº“è¿ç§»æŒ‡å—](scripts/README_MIGRATION.md)

### é›†æˆä¸æ’ä»¶
- [kubectl æ’ä»¶å®ç°](docs/kubectl-plugin-implementation.md)
- [kubectl æ’ä»¶ä½¿ç”¨æ–‡æ¡£](kubectl-plugin/README.md)
- [GitLab Runner é…ç½®](docs/gitlab-runner-configuration.md)
- [GitLab Runner Token ç®¡ç†](docs/gitlab-runner-token-management.md)
- [GitLab åˆ›å»º Runner æŒ‡å—](docs/gitlab-create-runner-guide.md)

### UI ä¼˜åŒ–
- [å¯¹è¯æ¡†å°ºå¯¸å’Œæœç´¢ä¿®å¤](docs/dialog-size-and-search-fixes.md)

## ğŸ”„ æ›´æ–°å’Œç»´æŠ¤

### ç‰ˆæœ¬æ›´æ–°

```bash
# 1. å¤‡ä»½æ•°æ®
./scripts/backup.sh

# 2. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 3. æŸ¥çœ‹ç‰ˆæœ¬å˜æ›´
cat VERSION
git log --oneline -10

# 4. Docker Compose æ›´æ–°
docker-compose down
docker-compose pull
docker-compose up --build -d

# 5. Kubernetes æ›´æ–°
kubectl set image deployment/kube-node-manager \
  kube-node-manager=your-registry/kube-node-manager:v2.9.8 \
  -n kube-system

# 6. éªŒè¯æ›´æ–°
docker-compose ps  # æˆ–
kubectl get pods -n kube-system
```

### æ•°æ®å¤‡ä»½

```bash
# è‡ªåŠ¨å¤‡ä»½è„šæœ¬
./scripts/backup.sh

# æ‰‹åŠ¨å¤‡ä»½ SQLite
cp backend/data/kube-node-manager.db \
   backup/kube-node-manager-$(date +%Y%m%d-%H%M%S).db

# æ‰‹åŠ¨å¤‡ä»½ PostgreSQL
pg_dump -h <host> -U <user> <dbname> > backup.sql

# Kubernetes PVC å¤‡ä»½
kubectl cp kube-system/<pod-name>:/data/kube-node-manager.db \
  ./backup/kube-node-manager-$(date +%Y%m%d-%H%M%S).db
```

### æ•°æ®æ¢å¤

```bash
# SQLite æ¢å¤
cp backup/kube-node-manager-YYYYMMDD.db backend/data/kube-node-manager.db
docker-compose restart backend

# PostgreSQL æ¢å¤
psql -h <host> -U <user> <dbname> < backup.sql
```

### æ¸…ç†ç»´æŠ¤

```bash
# æ¸…ç† Docker èµ„æº
docker-compose down
docker system prune -a

# æ¸…ç†æ—¥å¿—ï¼ˆä¿ç•™æœ€è¿‘ 7 å¤©ï¼‰
find backend/logs -name "*.log" -mtime +7 -delete

# æ¸…ç†å®¡è®¡æ—¥å¿—ï¼ˆæ•°æ®åº“ï¼‰
# åœ¨åº”ç”¨ä¸­æ‰§è¡Œæˆ–ç›´æ¥æ“ä½œæ•°æ®åº“
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨è€ƒè™‘ä¸º kube-node-manager åšå‡ºè´¡çŒ®ï¼

### è´¡çŒ®æ–¹å¼

1. **æŠ¥å‘Š Bug**
   - ä½¿ç”¨ [Issue Tracker](../../issues)
   - æè¿°é—®é¢˜å’Œå¤ç°æ­¥éª¤
   - æä¾›ç›¸å…³æ—¥å¿—å’Œç¯å¢ƒä¿¡æ¯

2. **åŠŸèƒ½å»ºè®®**
   - æäº¤ Feature Request
   - è¯´æ˜ä½¿ç”¨åœºæ™¯å’Œé¢„æœŸæ•ˆæœ
   - å‚ä¸è®¨è®ºå’Œæ–¹æ¡ˆè®¾è®¡

3. **ä»£ç è´¡çŒ®**
   - Fork æœ¬ä»“åº“
   - åˆ›å»ºç‰¹æ€§åˆ†æ”¯
   - ç¼–å†™ä»£ç å’Œæµ‹è¯•
   - æäº¤ Pull Request

### è´¡çŒ®æµç¨‹

```bash
# 1. Fork å¹¶å…‹éš†
git clone https://github.com/<your-username>/kube-node-manager.git
cd kube-node-manager

# 2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
git checkout -b feature/amazing-feature

# 3. è¿›è¡Œå¼€å‘
# ç¼–å†™ä»£ç ã€æµ‹è¯•ã€æ–‡æ¡£

# 4. æäº¤æ›´æ”¹
git add .
git commit -m "feat: add amazing feature"

# 5. æ¨é€åˆ°è¿œç¨‹
git push origin feature/amazing-feature

# 6. åˆ›å»º Pull Request
# åœ¨ GitHub ä¸Šåˆ›å»º PR å¹¶æè¿°å˜æ›´
```

### ä»£ç å®¡æŸ¥æ ‡å‡†

- âœ… ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ
- âœ… åŒ…å«å¿…è¦çš„æµ‹è¯•
- âœ… é€šè¿‡æ‰€æœ‰ CI æ£€æŸ¥
- âœ… æ›´æ–°ç›¸å…³æ–‡æ¡£
- âœ… Commit æ¶ˆæ¯æ¸…æ™°

### å¼€å‘è€…ç¤¾åŒº

- ğŸ’¬ è®¨è®º: [GitHub Discussions](../../discussions)
- ğŸ“§ é‚®ä»¶: é¡¹ç›®ç»´æŠ¤è€…é‚®ç®±
- ğŸ¤ è´¡çŒ®è€…: æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…ï¼

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT è®¸å¯è¯**ã€‚

è¿™æ„å‘³ç€æ‚¨å¯ä»¥è‡ªç”±åœ°ï¼š
- âœ… å•†ä¸šä½¿ç”¨
- âœ… ä¿®æ”¹
- âœ… åˆ†å‘
- âœ… ç§æœ‰ä½¿ç”¨

è¯¦æƒ…è¯·å‚è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ“ æ”¯æŒä¸è”ç³»

### è·å–å¸®åŠ©

- ğŸ“– **æ–‡æ¡£**: æŸ¥çœ‹ [docs](docs/) ç›®å½•
- ğŸ› **Bug æŠ¥å‘Š**: [æäº¤ Issue](../../issues/new?template=bug_report.md)
- ğŸ’¡ **åŠŸèƒ½è¯·æ±‚**: [æäº¤ Feature Request](../../issues/new?template=feature_request.md)
- ğŸ’¬ **è®¨è®º**: [GitHub Discussions](../../discussions)

### é¡¹ç›®ä¿¡æ¯

- **å½“å‰ç‰ˆæœ¬**: v2.9.8
- **æœ€åæ›´æ–°**: 2024-10-22
- **ç»´æŠ¤çŠ¶æ€**: ğŸŸ¢ æ´»è·ƒç»´æŠ¤ä¸­

### é¸£è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

<div align="center">

**âš ï¸ é‡è¦æé†’**

åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰ï¼Œè¯·åŠ¡å¿…ï¼š
- ğŸ” ä¿®æ”¹é»˜è®¤ç®¡ç†å‘˜å¯†ç ï¼ˆ`admin` / `admin123`ï¼‰
- ğŸ”‘ æ›´æ”¹é»˜è®¤ JWT å¯†é’¥
- ğŸ›¡ï¸ å¯ç”¨ HTTPS
- ğŸ“Š é…ç½®ç›‘æ§å’Œå‘Šè­¦
- ğŸ’¾ è®¾ç½®å®šæœŸæ•°æ®å¤‡ä»½

**Made with â¤ï¸ by the kube-node-manager team**

[â¬† å›åˆ°é¡¶éƒ¨](#-kubernetes-èŠ‚ç‚¹ç®¡ç†å™¨)

</div>